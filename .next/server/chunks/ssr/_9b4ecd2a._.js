module.exports=[72124,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}},56592,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(52100),e=d.__importDefault(a.r(23952)),f=d.__importDefault(a.r(72124));c.default=class{constructor(a){var b,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=null!=(b=a.shouldThrowOnError)&&b,this.signal=a.signal,this.isMaybeSingle=null!=(c=a.isMaybeSingle)&&c,a.fetch?this.fetch=a.fetch:"undefined"==typeof fetch?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,b){return this.headers=new Headers(this.headers),this.headers.set(a,b),this}then(a,b){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let c=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var b,c,d,e;let g=null,h=null,i=null,j=a.status,k=a.statusText;if(a.ok){if("HEAD"!==this.method){let c=await a.text();""===c||(h="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null==(b=this.headers.get("Accept"))?void 0:b.includes("application/vnd.pgrst.plan+text"))?c:JSON.parse(c))}let e=null==(c=this.headers.get("Prefer"))?void 0:c.match(/count=(exact|planned|estimated)/),f=null==(d=a.headers.get("content-range"))?void 0:d.split("/");e&&f&&f.length>1&&(i=parseInt(f[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(h)&&(h.length>1?(g={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,i=null,j=406,k="Not Acceptable"):h=1===h.length?h[0]:null)}else{let b=await a.text();try{g=JSON.parse(b),Array.isArray(g)&&404===a.status&&(h=[],g=null,j=200,k="OK")}catch(c){404===a.status&&""===b?(j=204,k="No Content"):g={message:b}}if(g&&this.isMaybeSingle&&(null==(e=null==g?void 0:g.details)?void 0:e.includes("0 rows"))&&(g=null,j=200,k="OK"),g&&this.shouldThrowOnError)throw new f.default(g)}return{error:g,data:h,count:i,status:j,statusText:k}});return this.shouldThrowOnError||(c=c.catch(a=>{var b,c,d;return{error:{message:`${null!=(b=null==a?void 0:a.name)?b:"FetchError"}: ${null==a?void 0:a.message}`,details:`${null!=(c=null==a?void 0:a.stack)?c:""}`,hint:"",code:`${null!=(d=null==a?void 0:a.code)?d:""}`},data:null,count:null,status:0,statusText:""}})),c.then(a,b)}returns(){return this}overrideTypes(){return this}}},98564,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(52100).__importDefault(a.r(56592));class e extends d.default{select(a){let b=!1,c=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!b?"":('"'===a&&(b=!b),a)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:b=!0,nullsFirst:c,foreignTable:d,referencedTable:e=d}={}){let f=e?`${e}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${a}.${b?"asc":"desc"}${void 0===c?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:b,referencedTable:c=b}={}){let d=void 0===c?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,b,{foreignTable:c,referencedTable:d=c}={}){let e=void 0===d?"offset":`${d}.offset`,f=void 0===d?"limit":`${d}.limit`;return this.url.searchParams.set(e,`${a}`),this.url.searchParams.set(f,`${b-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:b=!1,settings:c=!1,buffers:d=!1,wal:e=!1,format:f="text"}={}){var g;let h=[a?"analyze":null,b?"verbose":null,c?"settings":null,d?"buffers":null,e?"wal":null].filter(Boolean).join("|"),i=null!=(g=this.headers.get("Accept"))?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${i}"; options=${h};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}c.default=e},19001,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(52100).__importDefault(a.r(98564));class e extends d.default{eq(a,b){return this.url.searchParams.append(a,`eq.${b}`),this}neq(a,b){return this.url.searchParams.append(a,`neq.${b}`),this}gt(a,b){return this.url.searchParams.append(a,`gt.${b}`),this}gte(a,b){return this.url.searchParams.append(a,`gte.${b}`),this}lt(a,b){return this.url.searchParams.append(a,`lt.${b}`),this}lte(a,b){return this.url.searchParams.append(a,`lte.${b}`),this}like(a,b){return this.url.searchParams.append(a,`like.${b}`),this}likeAllOf(a,b){return this.url.searchParams.append(a,`like(all).{${b.join(",")}}`),this}likeAnyOf(a,b){return this.url.searchParams.append(a,`like(any).{${b.join(",")}}`),this}ilike(a,b){return this.url.searchParams.append(a,`ilike.${b}`),this}ilikeAllOf(a,b){return this.url.searchParams.append(a,`ilike(all).{${b.join(",")}}`),this}ilikeAnyOf(a,b){return this.url.searchParams.append(a,`ilike(any).{${b.join(",")}}`),this}is(a,b){return this.url.searchParams.append(a,`is.${b}`),this}in(a,b){let c=Array.from(new Set(b)).map(a=>"string"==typeof a&&RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cs.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cs.{${b.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(b)}`),this}containedBy(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cd.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cd.{${b.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(b)}`),this}rangeGt(a,b){return this.url.searchParams.append(a,`sr.${b}`),this}rangeGte(a,b){return this.url.searchParams.append(a,`nxl.${b}`),this}rangeLt(a,b){return this.url.searchParams.append(a,`sl.${b}`),this}rangeLte(a,b){return this.url.searchParams.append(a,`nxr.${b}`),this}rangeAdjacent(a,b){return this.url.searchParams.append(a,`adj.${b}`),this}overlaps(a,b){return"string"==typeof b?this.url.searchParams.append(a,`ov.${b}`):this.url.searchParams.append(a,`ov.{${b.join(",")}}`),this}textSearch(a,b,{config:c,type:d}={}){let e="";"plain"===d?e="pl":"phrase"===d?e="ph":"websearch"===d&&(e="w");let f=void 0===c?"":`(${c})`;return this.url.searchParams.append(a,`${e}fts${f}.${b}`),this}match(a){return Object.entries(a).forEach(([a,b])=>{this.url.searchParams.append(a,`eq.${b}`)}),this}not(a,b,c){return this.url.searchParams.append(a,`not.${b}.${c}`),this}or(a,{foreignTable:b,referencedTable:c=b}={}){let d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,b,c){return this.url.searchParams.append(a,`${b}.${c}`),this}}c.default=e},3619,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(52100).__importDefault(a.r(19001));c.default=class{constructor(a,{headers:b={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(b),this.schema=c,this.fetch=d}select(a,b){let{head:c=!1,count:e}=null!=b?b:{},f=!1,g=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!f?"":('"'===a&&(f=!f),a)).join("");return this.url.searchParams.set("select",g),e&&this.headers.append("Prefer",`count=${e}`),new d.default({method:c?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:b,defaultToNull:c=!0}={}){var e;if(b&&this.headers.append("Prefer",`count=${b}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new d.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(e=this.fetch)?e:fetch})}upsert(a,{onConflict:b,ignoreDuplicates:c=!1,count:e,defaultToNull:f=!0}={}){var g;if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),void 0!==b&&this.url.searchParams.set("on_conflict",b),e&&this.headers.append("Prefer",`count=${e}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new d.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(g=this.fetch)?g:fetch})}update(a,{count:b}={}){var c;return b&&this.headers.append("Prefer",`count=${b}`),new d.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(c=this.fetch)?c:fetch})}delete({count:a}={}){var b;return a&&this.headers.append("Prefer",`count=${a}`),new d.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!=(b=this.fetch)?b:fetch})}}},27749,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(52100),e=d.__importDefault(a.r(3619)),f=d.__importDefault(a.r(19001));class g{constructor(a,{headers:b={},schema:c,fetch:d}={}){this.url=a,this.headers=new Headers(b),this.schemaName=c,this.fetch=d}from(a){let b=new URL(`${this.url}/${a}`);return new e.default(b,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new g(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,b={},{head:c=!1,get:d=!1,count:e}={}){var g;let h,i,j=new URL(`${this.url}/rpc/${a}`);c||d?(h=c?"HEAD":"GET",Object.entries(b).filter(([a,b])=>void 0!==b).map(([a,b])=>[a,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([a,b])=>{j.searchParams.append(a,b)})):(h="POST",i=b);let k=new Headers(this.headers);return e&&k.set("Prefer",`count=${e}`),new f.default({method:h,url:j,headers:k,schema:this.schemaName,body:i,fetch:null!=(g=this.fetch)?g:fetch})}}c.default=g},79614,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.PostgrestError=c.PostgrestBuilder=c.PostgrestTransformBuilder=c.PostgrestFilterBuilder=c.PostgrestQueryBuilder=c.PostgrestClient=void 0;let d=a.r(52100),e=d.__importDefault(a.r(27749));c.PostgrestClient=e.default;let f=d.__importDefault(a.r(3619));c.PostgrestQueryBuilder=f.default;let g=d.__importDefault(a.r(19001));c.PostgrestFilterBuilder=g.default;let h=d.__importDefault(a.r(98564));c.PostgrestTransformBuilder=h.default;let i=d.__importDefault(a.r(56592));c.PostgrestBuilder=i.default;let j=d.__importDefault(a.r(72124));c.PostgrestError=j.default,c.default={PostgrestClient:e.default,PostgrestQueryBuilder:f.default,PostgrestFilterBuilder:g.default,PostgrestTransformBuilder:h.default,PostgrestBuilder:i.default,PostgrestError:j.default}},13684,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),c.parse=function(a,b){let c=new j,d=a.length;if(d<2)return c;let e=b?.decode||m,f=0;do{let b=a.indexOf("=",f);if(-1===b)break;let g=a.indexOf(";",f),h=-1===g?d:g;if(b>h){f=a.lastIndexOf(";",b-1)+1;continue}let i=k(a,f,b),j=l(a,b,i),m=a.slice(i,j);if(void 0===c[m]){let d=k(a,b+1,h),f=l(a,h,d),g=e(a.slice(d,f));c[m]=g}f=h+1}while(f<d)return c},c.serialize=function(a,b,c){let d=c?.encode||encodeURIComponent;if(!e.test(a))throw TypeError(`argument name is invalid: ${a}`);let j=d(b);if(!f.test(j))throw TypeError(`argument val is invalid: ${b}`);let k=a+"="+j;if(!c)return k;if(void 0!==c.maxAge){if(!Number.isInteger(c.maxAge))throw TypeError(`option maxAge is invalid: ${c.maxAge}`);k+="; Max-Age="+c.maxAge}if(c.domain){if(!g.test(c.domain))throw TypeError(`option domain is invalid: ${c.domain}`);k+="; Domain="+c.domain}if(c.path){if(!h.test(c.path))throw TypeError(`option path is invalid: ${c.path}`);k+="; Path="+c.path}if(c.expires){var l;if(l=c.expires,"[object Date]"!==i.call(l)||!Number.isFinite(c.expires.valueOf()))throw TypeError(`option expires is invalid: ${c.expires}`);k+="; Expires="+c.expires.toUTCString()}if(c.httpOnly&&(k+="; HttpOnly"),c.secure&&(k+="; Secure"),c.partitioned&&(k+="; Partitioned"),c.priority)switch("string"==typeof c.priority?c.priority.toLowerCase():void 0){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${c.priority}`)}if(c.sameSite)switch("string"==typeof c.sameSite?c.sameSite.toLowerCase():c.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${c.sameSite}`)}return k};let e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,f=/^[\u0021-\u003A\u003C-\u007E]*$/,g=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,h=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,j=((d=function(){}).prototype=Object.create(null),d);function k(a,b,c){do{let c=a.charCodeAt(b);if(32!==c&&9!==c)return b}while(++b<c)return c}function l(a,b,c){for(;b>c;){let c=a.charCodeAt(--b);if(32!==c&&9!==c)return b+1}return c}function m(a){if(-1===a.indexOf("%"))return a;try{return decodeURIComponent(a)}catch(b){return a}}},43999,(a,b,c)=>{},39451,a=>{"use strict";let b;var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=a.i(87924),B=a.i(72131),C=a.i(50944),D=a.i(70106);let E=(0,D.default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var F=a.i(63519);let G=(0,D.default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),H=(0,D.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var I=a.i(19272);let J=(0,D.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var K=a.i(99570),L=a.i(66718),M=a.i(29246),N=a.i(70430),O=a.i(54614),P=a.i(35112);function Q(a,[b,c]){return Math.min(c,Math.max(b,a))}var R=a.i(7554),S=a.i(37738),T=a.i(70121),U=a.i(50104),V=B.createContext(void 0),W=a.i(96743),X=a.i(86228),Y=a.i(22297),Z=a.i(92843),$=a.i(4691),_=a.i(92616),aa=a.i(30553),ab=a.i(11011),ac=a.i(46872),ad=a.i(25152),ae=a.i(72752),af=a.i(28094),ag=a.i(41852),ah=a.i(52081),ai=[" ","Enter","ArrowUp","ArrowDown"],aj=[" ","Enter"],ak="Select",[al,am,an]=(0,S.createCollection)(ak),[ao,ap]=(0,U.createContextScope)(ak,[an,$.createPopperScope]),aq=(0,$.createPopperScope)(),[ar,as]=ao(ak),[at,au]=ao(ak),av=a=>{let b,{__scopeSelect:c,children:d,open:e,defaultOpen:f,onOpenChange:g,value:h,defaultValue:i,onValueChange:j,dir:k,name:l,autoComplete:m,disabled:n,required:o,form:p}=a,q=aq(c),[r,s]=B.useState(null),[t,u]=B.useState(null),[v,w]=B.useState(!1),x=(b=B.useContext(V),k||b||"ltr"),[y,z]=(0,ad.useControllableState)({prop:e,defaultProp:f??!1,onChange:g,caller:ak}),[C,D]=(0,ad.useControllableState)({prop:h,defaultProp:i,onChange:j,caller:ak}),E=B.useRef(null),F=!r||p||!!r.closest("form"),[G,H]=B.useState(new Set),I=Array.from(G).map(a=>a.props.value).join(";");return(0,A.jsx)($.Root,{...q,children:(0,A.jsxs)(ar,{required:o,scope:c,trigger:r,onTriggerChange:s,valueNode:t,onValueNodeChange:u,valueNodeHasChildren:v,onValueNodeHasChildrenChange:w,contentId:(0,Z.useId)(),value:C,onValueChange:D,open:y,onOpenChange:z,dir:x,triggerPointerDownPosRef:E,disabled:n,children:[(0,A.jsx)(al.Provider,{scope:c,children:(0,A.jsx)(at,{scope:a.__scopeSelect,onNativeOptionAdd:B.useCallback(a=>{H(b=>new Set(b).add(a))},[]),onNativeOptionRemove:B.useCallback(a=>{H(b=>{let c=new Set(b);return c.delete(a),c})},[]),children:d})}),F?(0,A.jsxs)(a6,{"aria-hidden":!0,required:o,tabIndex:-1,name:l,autoComplete:m,value:C,onChange:a=>D(a.target.value),disabled:n,form:p,children:[void 0===C?(0,A.jsx)("option",{value:""}):null,Array.from(G)]},I):null]})})};av.displayName=ak;var aw="SelectTrigger",ax=B.forwardRef((a,b)=>{let{__scopeSelect:c,disabled:d=!1,...e}=a,f=aq(c),g=as(aw,c),h=g.disabled||d,i=(0,T.useComposedRefs)(b,g.onTriggerChange),j=am(c),k=B.useRef("touch"),[l,m,n]=a8(a=>{let b=j().filter(a=>!a.disabled),c=b.find(a=>a.value===g.value),d=a9(b,a,c);void 0!==d&&g.onValueChange(d.value)}),o=a=>{h||(g.onOpenChange(!0),n()),a&&(g.triggerPointerDownPosRef.current={x:Math.round(a.pageX),y:Math.round(a.pageY)})};return(0,A.jsx)($.Anchor,{asChild:!0,...f,children:(0,A.jsx)(aa.Primitive.button,{type:"button",role:"combobox","aria-controls":g.contentId,"aria-expanded":g.open,"aria-required":g.required,"aria-autocomplete":"none",dir:g.dir,"data-state":g.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":a7(g.value)?"":void 0,...e,ref:i,onClick:(0,R.composeEventHandlers)(e.onClick,a=>{a.currentTarget.focus(),"mouse"!==k.current&&o(a)}),onPointerDown:(0,R.composeEventHandlers)(e.onPointerDown,a=>{k.current=a.pointerType;let b=a.target;b.hasPointerCapture(a.pointerId)&&b.releasePointerCapture(a.pointerId),0===a.button&&!1===a.ctrlKey&&"mouse"===a.pointerType&&(o(a),a.preventDefault())}),onKeyDown:(0,R.composeEventHandlers)(e.onKeyDown,a=>{let b=""!==l.current;a.ctrlKey||a.altKey||a.metaKey||1!==a.key.length||m(a.key),(!b||" "!==a.key)&&ai.includes(a.key)&&(o(),a.preventDefault())})})})});ax.displayName=aw;var ay="SelectValue",az=B.forwardRef((a,b)=>{let{__scopeSelect:c,className:d,style:e,children:f,placeholder:g="",...h}=a,i=as(ay,c),{onValueNodeHasChildrenChange:j}=i,k=void 0!==f,l=(0,T.useComposedRefs)(b,i.onValueNodeChange);return(0,ae.useLayoutEffect)(()=>{j(k)},[j,k]),(0,A.jsx)(aa.Primitive.span,{...h,ref:l,style:{pointerEvents:"none"},children:a7(i.value)?(0,A.jsx)(A.Fragment,{children:g}):f})});az.displayName=ay;var aA=B.forwardRef((a,b)=>{let{__scopeSelect:c,children:d,...e}=a;return(0,A.jsx)(aa.Primitive.span,{"aria-hidden":!0,...e,ref:b,children:d||"▼"})});aA.displayName="SelectIcon";var aB=a=>(0,A.jsx)(_.Portal,{asChild:!0,...a});aB.displayName="SelectPortal";var aC="SelectContent",aD=B.forwardRef((a,b)=>{let c=as(aC,a.__scopeSelect),[d,e]=B.useState();return((0,ae.useLayoutEffect)(()=>{e(new DocumentFragment)},[]),c.open)?(0,A.jsx)(aH,{...a,ref:b}):d?P.createPortal((0,A.jsx)(aE,{scope:a.__scopeSelect,children:(0,A.jsx)(al.Slot,{scope:a.__scopeSelect,children:(0,A.jsx)("div",{children:a.children})})}),d):null});aD.displayName=aC;var[aE,aF]=ao(aC),aG=(0,ab.createSlot)("SelectContent.RemoveScroll"),aH=B.forwardRef((a,b)=>{let{__scopeSelect:c,position:d="item-aligned",onCloseAutoFocus:e,onEscapeKeyDown:f,onPointerDownOutside:g,side:h,sideOffset:i,align:j,alignOffset:k,arrowPadding:l,collisionBoundary:m,collisionPadding:n,sticky:o,hideWhenDetached:p,avoidCollisions:q,...r}=a,s=as(aC,c),[t,u]=B.useState(null),[v,w]=B.useState(null),x=(0,T.useComposedRefs)(b,a=>u(a)),[y,z]=B.useState(null),[C,D]=B.useState(null),E=am(c),[F,G]=B.useState(!1),H=B.useRef(!1);B.useEffect(()=>{if(t)return(0,ag.hideOthers)(t)},[t]),(0,X.useFocusGuards)();let I=B.useCallback(a=>{let[b,...c]=E().map(a=>a.ref.current),[d]=c.slice(-1),e=document.activeElement;for(let c of a)if(c===e||(c?.scrollIntoView({block:"nearest"}),c===b&&v&&(v.scrollTop=0),c===d&&v&&(v.scrollTop=v.scrollHeight),c?.focus(),document.activeElement!==e))return},[E,v]),J=B.useCallback(()=>I([y,t]),[I,y,t]);B.useEffect(()=>{F&&J()},[F,J]);let{onOpenChange:K,triggerPointerDownPosRef:L}=s;B.useEffect(()=>{if(t){let a={x:0,y:0},b=b=>{a={x:Math.abs(Math.round(b.pageX)-(L.current?.x??0)),y:Math.abs(Math.round(b.pageY)-(L.current?.y??0))}},c=c=>{a.x<=10&&a.y<=10?c.preventDefault():t.contains(c.target)||K(!1),document.removeEventListener("pointermove",b),L.current=null};return null!==L.current&&(document.addEventListener("pointermove",b),document.addEventListener("pointerup",c,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",c,{capture:!0})}}},[t,K,L]),B.useEffect(()=>{let a=()=>K(!1);return window.addEventListener("blur",a),window.addEventListener("resize",a),()=>{window.removeEventListener("blur",a),window.removeEventListener("resize",a)}},[K]);let[M,N]=a8(a=>{let b=E().filter(a=>!a.disabled),c=b.find(a=>a.ref.current===document.activeElement),d=a9(b,a,c);d&&setTimeout(()=>d.ref.current.focus())}),O=B.useCallback((a,b,c)=>{let d=!H.current&&!c;(void 0!==s.value&&s.value===b||d)&&(z(a),d&&(H.current=!0))},[s.value]),P=B.useCallback(()=>t?.focus(),[t]),Q=B.useCallback((a,b,c)=>{let d=!H.current&&!c;(void 0!==s.value&&s.value===b||d)&&D(a)},[s.value]),S="popper"===d?aJ:aI,U=S===aJ?{side:h,sideOffset:i,align:j,alignOffset:k,arrowPadding:l,collisionBoundary:m,collisionPadding:n,sticky:o,hideWhenDetached:p,avoidCollisions:q}:{};return(0,A.jsx)(aE,{scope:c,content:t,viewport:v,onViewportChange:w,itemRefCallback:O,selectedItem:y,onItemLeave:P,itemTextRefCallback:Q,focusSelectedItem:J,selectedItemText:C,position:d,isPositioned:F,searchRef:M,children:(0,A.jsx)(ah.RemoveScroll,{as:aG,allowPinchZoom:!0,children:(0,A.jsx)(Y.FocusScope,{asChild:!0,trapped:s.open,onMountAutoFocus:a=>{a.preventDefault()},onUnmountAutoFocus:(0,R.composeEventHandlers)(e,a=>{s.trigger?.focus({preventScroll:!0}),a.preventDefault()}),children:(0,A.jsx)(W.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:f,onPointerDownOutside:g,onFocusOutside:a=>a.preventDefault(),onDismiss:()=>s.onOpenChange(!1),children:(0,A.jsx)(S,{role:"listbox",id:s.contentId,"data-state":s.open?"open":"closed",dir:s.dir,onContextMenu:a=>a.preventDefault(),...r,...U,onPlaced:()=>G(!0),ref:x,style:{display:"flex",flexDirection:"column",outline:"none",...r.style},onKeyDown:(0,R.composeEventHandlers)(r.onKeyDown,a=>{let b=a.ctrlKey||a.altKey||a.metaKey;if("Tab"===a.key&&a.preventDefault(),b||1!==a.key.length||N(a.key),["ArrowUp","ArrowDown","Home","End"].includes(a.key)){let b=E().filter(a=>!a.disabled).map(a=>a.ref.current);if(["ArrowUp","End"].includes(a.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(a.key)){let c=a.target,d=b.indexOf(c);b=b.slice(d+1)}setTimeout(()=>I(b)),a.preventDefault()}})})})})})})});aH.displayName="SelectContentImpl";var aI=B.forwardRef((a,b)=>{let{__scopeSelect:c,onPlaced:d,...e}=a,f=as(aC,c),g=aF(aC,c),[h,i]=B.useState(null),[j,k]=B.useState(null),l=(0,T.useComposedRefs)(b,a=>k(a)),m=am(c),n=B.useRef(!1),o=B.useRef(!0),{viewport:p,selectedItem:q,selectedItemText:r,focusSelectedItem:s}=g,t=B.useCallback(()=>{if(f.trigger&&f.valueNode&&h&&j&&p&&q&&r){let a=f.trigger.getBoundingClientRect(),b=j.getBoundingClientRect(),c=f.valueNode.getBoundingClientRect(),e=r.getBoundingClientRect();if("rtl"!==f.dir){let d=e.left-b.left,f=c.left-d,g=a.left-f,i=a.width+g,j=Math.max(i,b.width),k=Q(f,[10,Math.max(10,window.innerWidth-10-j)]);h.style.minWidth=i+"px",h.style.left=k+"px"}else{let d=b.right-e.right,f=window.innerWidth-c.right-d,g=window.innerWidth-a.right-f,i=a.width+g,j=Math.max(i,b.width),k=Q(f,[10,Math.max(10,window.innerWidth-10-j)]);h.style.minWidth=i+"px",h.style.right=k+"px"}let g=m(),i=window.innerHeight-20,k=p.scrollHeight,l=window.getComputedStyle(j),o=parseInt(l.borderTopWidth,10),s=parseInt(l.paddingTop,10),t=parseInt(l.borderBottomWidth,10),u=o+s+k+parseInt(l.paddingBottom,10)+t,v=Math.min(5*q.offsetHeight,u),w=window.getComputedStyle(p),x=parseInt(w.paddingTop,10),y=parseInt(w.paddingBottom,10),z=a.top+a.height/2-10,A=q.offsetHeight/2,B=o+s+(q.offsetTop+A);if(B<=z){let a=g.length>0&&q===g[g.length-1].ref.current;h.style.bottom="0px";let b=Math.max(i-z,A+(a?y:0)+(j.clientHeight-p.offsetTop-p.offsetHeight)+t);h.style.height=B+b+"px"}else{let a=g.length>0&&q===g[0].ref.current;h.style.top="0px";let b=Math.max(z,o+p.offsetTop+(a?x:0)+A);h.style.height=b+(u-B)+"px",p.scrollTop=B-z+p.offsetTop}h.style.margin="10px 0",h.style.minHeight=v+"px",h.style.maxHeight=i+"px",d?.(),requestAnimationFrame(()=>n.current=!0)}},[m,f.trigger,f.valueNode,h,j,p,q,r,f.dir,d]);(0,ae.useLayoutEffect)(()=>t(),[t]);let[u,v]=B.useState();(0,ae.useLayoutEffect)(()=>{j&&v(window.getComputedStyle(j).zIndex)},[j]);let w=B.useCallback(a=>{a&&!0===o.current&&(t(),s?.(),o.current=!1)},[t,s]);return(0,A.jsx)(aK,{scope:c,contentWrapper:h,shouldExpandOnScrollRef:n,onScrollButtonChange:w,children:(0,A.jsx)("div",{ref:i,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:u},children:(0,A.jsx)(aa.Primitive.div,{...e,ref:l,style:{boxSizing:"border-box",maxHeight:"100%",...e.style}})})})});aI.displayName="SelectItemAlignedPosition";var aJ=B.forwardRef((a,b)=>{let{__scopeSelect:c,align:d="start",collisionPadding:e=10,...f}=a,g=aq(c);return(0,A.jsx)($.Content,{...g,...f,ref:b,align:d,collisionPadding:e,style:{boxSizing:"border-box",...f.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});aJ.displayName="SelectPopperPosition";var[aK,aL]=ao(aC,{}),aM="SelectViewport",aN=B.forwardRef((a,b)=>{let{__scopeSelect:c,nonce:d,...e}=a,f=aF(aM,c),g=aL(aM,c),h=(0,T.useComposedRefs)(b,f.onViewportChange),i=B.useRef(0);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:d}),(0,A.jsx)(al.Slot,{scope:c,children:(0,A.jsx)(aa.Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...e,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...e.style},onScroll:(0,R.composeEventHandlers)(e.onScroll,a=>{let b=a.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=g;if(d?.current&&c){let a=Math.abs(i.current-b.scrollTop);if(a>0){let d=window.innerHeight-20,e=Math.max(parseFloat(c.style.minHeight),parseFloat(c.style.height));if(e<d){let f=e+a,g=Math.min(d,f),h=f-g;c.style.height=g+"px","0px"===c.style.bottom&&(b.scrollTop=h>0?h:0,c.style.justifyContent="flex-end")}}}i.current=b.scrollTop})})})]})});aN.displayName=aM;var aO="SelectGroup",[aP,aQ]=ao(aO);B.forwardRef((a,b)=>{let{__scopeSelect:c,...d}=a,e=(0,Z.useId)();return(0,A.jsx)(aP,{scope:c,id:e,children:(0,A.jsx)(aa.Primitive.div,{role:"group","aria-labelledby":e,...d,ref:b})})}).displayName=aO;var aR="SelectLabel",aS=B.forwardRef((a,b)=>{let{__scopeSelect:c,...d}=a,e=aQ(aR,c);return(0,A.jsx)(aa.Primitive.div,{id:e.id,...d,ref:b})});aS.displayName=aR;var aT="SelectItem",[aU,aV]=ao(aT),aW=B.forwardRef((a,b)=>{let{__scopeSelect:c,value:d,disabled:e=!1,textValue:f,...g}=a,h=as(aT,c),i=aF(aT,c),j=h.value===d,[k,l]=B.useState(f??""),[m,n]=B.useState(!1),o=(0,T.useComposedRefs)(b,a=>i.itemRefCallback?.(a,d,e)),p=(0,Z.useId)(),q=B.useRef("touch"),r=()=>{e||(h.onValueChange(d),h.onOpenChange(!1))};if(""===d)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,A.jsx)(aU,{scope:c,value:d,disabled:e,textId:p,isSelected:j,onItemTextChange:B.useCallback(a=>{l(b=>b||(a?.textContent??"").trim())},[]),children:(0,A.jsx)(al.ItemSlot,{scope:c,value:d,disabled:e,textValue:k,children:(0,A.jsx)(aa.Primitive.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":j&&m,"data-state":j?"checked":"unchecked","aria-disabled":e||void 0,"data-disabled":e?"":void 0,tabIndex:e?void 0:-1,...g,ref:o,onFocus:(0,R.composeEventHandlers)(g.onFocus,()=>n(!0)),onBlur:(0,R.composeEventHandlers)(g.onBlur,()=>n(!1)),onClick:(0,R.composeEventHandlers)(g.onClick,()=>{"mouse"!==q.current&&r()}),onPointerUp:(0,R.composeEventHandlers)(g.onPointerUp,()=>{"mouse"===q.current&&r()}),onPointerDown:(0,R.composeEventHandlers)(g.onPointerDown,a=>{q.current=a.pointerType}),onPointerMove:(0,R.composeEventHandlers)(g.onPointerMove,a=>{q.current=a.pointerType,e?i.onItemLeave?.():"mouse"===q.current&&a.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,R.composeEventHandlers)(g.onPointerLeave,a=>{a.currentTarget===document.activeElement&&i.onItemLeave?.()}),onKeyDown:(0,R.composeEventHandlers)(g.onKeyDown,a=>{(i.searchRef?.current===""||" "!==a.key)&&(aj.includes(a.key)&&r()," "===a.key&&a.preventDefault())})})})})});aW.displayName=aT;var aX="SelectItemText",aY=B.forwardRef((a,b)=>{let{__scopeSelect:c,className:d,style:e,...f}=a,g=as(aX,c),h=aF(aX,c),i=aV(aX,c),j=au(aX,c),[k,l]=B.useState(null),m=(0,T.useComposedRefs)(b,a=>l(a),i.onItemTextChange,a=>h.itemTextRefCallback?.(a,i.value,i.disabled)),n=k?.textContent,o=B.useMemo(()=>(0,A.jsx)("option",{value:i.value,disabled:i.disabled,children:n},i.value),[i.disabled,i.value,n]),{onNativeOptionAdd:p,onNativeOptionRemove:q}=j;return(0,ae.useLayoutEffect)(()=>(p(o),()=>q(o)),[p,q,o]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(aa.Primitive.span,{id:i.textId,...f,ref:m}),i.isSelected&&g.valueNode&&!g.valueNodeHasChildren?P.createPortal(f.children,g.valueNode):null]})});aY.displayName=aX;var aZ="SelectItemIndicator",a$=B.forwardRef((a,b)=>{let{__scopeSelect:c,...d}=a;return aV(aZ,c).isSelected?(0,A.jsx)(aa.Primitive.span,{"aria-hidden":!0,...d,ref:b}):null});a$.displayName=aZ;var a_="SelectScrollUpButton",a0=B.forwardRef((a,b)=>{let c=aF(a_,a.__scopeSelect),d=aL(a_,a.__scopeSelect),[e,f]=B.useState(!1),g=(0,T.useComposedRefs)(b,d.onScrollButtonChange);return(0,ae.useLayoutEffect)(()=>{if(c.viewport&&c.isPositioned){let a=function(){f(b.scrollTop>0)},b=c.viewport;return a(),b.addEventListener("scroll",a),()=>b.removeEventListener("scroll",a)}},[c.viewport,c.isPositioned]),e?(0,A.jsx)(a3,{...a,ref:g,onAutoScroll:()=>{let{viewport:a,selectedItem:b}=c;a&&b&&(a.scrollTop=a.scrollTop-b.offsetHeight)}}):null});a0.displayName=a_;var a1="SelectScrollDownButton",a2=B.forwardRef((a,b)=>{let c=aF(a1,a.__scopeSelect),d=aL(a1,a.__scopeSelect),[e,f]=B.useState(!1),g=(0,T.useComposedRefs)(b,d.onScrollButtonChange);return(0,ae.useLayoutEffect)(()=>{if(c.viewport&&c.isPositioned){let a=function(){let a=b.scrollHeight-b.clientHeight;f(Math.ceil(b.scrollTop)<a)},b=c.viewport;return a(),b.addEventListener("scroll",a),()=>b.removeEventListener("scroll",a)}},[c.viewport,c.isPositioned]),e?(0,A.jsx)(a3,{...a,ref:g,onAutoScroll:()=>{let{viewport:a,selectedItem:b}=c;a&&b&&(a.scrollTop=a.scrollTop+b.offsetHeight)}}):null});a2.displayName=a1;var a3=B.forwardRef((a,b)=>{let{__scopeSelect:c,onAutoScroll:d,...e}=a,f=aF("SelectScrollButton",c),g=B.useRef(null),h=am(c),i=B.useCallback(()=>{null!==g.current&&(window.clearInterval(g.current),g.current=null)},[]);return B.useEffect(()=>()=>i(),[i]),(0,ae.useLayoutEffect)(()=>{let a=h().find(a=>a.ref.current===document.activeElement);a?.ref.current?.scrollIntoView({block:"nearest"})},[h]),(0,A.jsx)(aa.Primitive.div,{"aria-hidden":!0,...e,ref:b,style:{flexShrink:0,...e.style},onPointerDown:(0,R.composeEventHandlers)(e.onPointerDown,()=>{null===g.current&&(g.current=window.setInterval(d,50))}),onPointerMove:(0,R.composeEventHandlers)(e.onPointerMove,()=>{f.onItemLeave?.(),null===g.current&&(g.current=window.setInterval(d,50))}),onPointerLeave:(0,R.composeEventHandlers)(e.onPointerLeave,()=>{i()})})}),a4=B.forwardRef((a,b)=>{let{__scopeSelect:c,...d}=a;return(0,A.jsx)(aa.Primitive.div,{"aria-hidden":!0,...d,ref:b})});a4.displayName="SelectSeparator";var a5="SelectArrow";B.forwardRef((a,b)=>{let{__scopeSelect:c,...d}=a,e=aq(c),f=as(a5,c),g=aF(a5,c);return f.open&&"popper"===g.position?(0,A.jsx)($.Arrow,{...e,...d,ref:b}):null}).displayName=a5;var a6=B.forwardRef(({__scopeSelect:a,value:b,...c},d)=>{let e,f=B.useRef(null),g=(0,T.useComposedRefs)(d,f),h=(e=B.useRef({value:b,previous:b}),B.useMemo(()=>(e.current.value!==b&&(e.current.previous=e.current.value,e.current.value=b),e.current.previous),[b]));return B.useEffect(()=>{let a=f.current;if(!a)return;let c=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(h!==b&&c){let d=new Event("change",{bubbles:!0});c.call(a,b),a.dispatchEvent(d)}},[h,b]),(0,A.jsx)(aa.Primitive.select,{...c,style:{...af.VISUALLY_HIDDEN_STYLES,...c.style},ref:g,defaultValue:b})});function a7(a){return""===a||void 0===a}function a8(a){let b=(0,ac.useCallbackRef)(a),c=B.useRef(""),d=B.useRef(0),e=B.useCallback(a=>{let e=c.current+a;b(e),function a(b){c.current=b,window.clearTimeout(d.current),""!==b&&(d.current=window.setTimeout(()=>a(""),1e3))}(e)},[b]),f=B.useCallback(()=>{c.current="",window.clearTimeout(d.current)},[]);return B.useEffect(()=>()=>window.clearTimeout(d.current),[]),[c,e,f]}function a9(a,b,c){var d,e;let f=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,g=c?a.indexOf(c):-1,h=(d=a,e=Math.max(g,0),d.map((a,b)=>d[(e+b)%d.length]));1===f.length&&(h=h.filter(a=>a!==c));let i=h.find(a=>a.textValue.toLowerCase().startsWith(f.toLowerCase()));return i!==c?i:void 0}a6.displayName="SelectBubbleInput";var ba=a.i(33441);let bb=(0,D.default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var bc=a.i(68114);let bd=B.forwardRef(({className:a,children:b,...c},d)=>(0,A.jsxs)(ax,{ref:d,className:(0,bc.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...c,children:[b,(0,A.jsx)(aA,{asChild:!0,children:(0,A.jsx)(J,{className:"h-4 w-4 opacity-50"})})]}));bd.displayName=ax.displayName;let be=B.forwardRef(({className:a,...b},c)=>(0,A.jsx)(a0,{ref:c,className:(0,bc.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,A.jsx)(bb,{className:"h-4 w-4"})}));be.displayName=a0.displayName;let bf=B.forwardRef(({className:a,...b},c)=>(0,A.jsx)(a2,{ref:c,className:(0,bc.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,A.jsx)(J,{className:"h-4 w-4"})}));bf.displayName=a2.displayName;let bg=B.forwardRef(({className:a,children:b,position:c="popper",...d},e)=>(0,A.jsx)(aB,{children:(0,A.jsxs)(aD,{ref:e,className:(0,bc.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...d,children:[(0,A.jsx)(be,{}),(0,A.jsx)(aN,{className:(0,bc.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:b}),(0,A.jsx)(bf,{})]})}));bg.displayName=aD.displayName,B.forwardRef(({className:a,...b},c)=>(0,A.jsx)(aS,{ref:c,className:(0,bc.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...b})).displayName=aS.displayName;let bh=B.forwardRef(({className:a,children:b,...c},d)=>(0,A.jsxs)(aW,{ref:d,className:(0,bc.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",a),...c,children:[(0,A.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,A.jsx)(a$,{children:(0,A.jsx)(ba.Check,{className:"h-4 w-4"})})}),(0,A.jsx)(aY,{children:b})]}));bh.displayName=aW.displayName,B.forwardRef(({className:a,...b},c)=>(0,A.jsx)(a4,{ref:c,className:(0,bc.cn)("-mx-1 my-1 h-px bg-muted",a),...b})).displayName=a4.displayName;var bi=a.i(77192),bj="Collapsible",[bk,bl]=(0,U.createContextScope)(bj),[bm,bn]=bk(bj),bo=B.forwardRef((a,b)=>{let{__scopeCollapsible:c,open:d,defaultOpen:e,disabled:f,onOpenChange:g,...h}=a,[i,j]=(0,ad.useControllableState)({prop:d,defaultProp:e??!1,onChange:g,caller:bj});return(0,A.jsx)(bm,{scope:c,disabled:f,contentId:(0,Z.useId)(),open:i,onOpenToggle:B.useCallback(()=>j(a=>!a),[j]),children:(0,A.jsx)(aa.Primitive.div,{"data-state":bu(i),"data-disabled":f?"":void 0,...h,ref:b})})});bo.displayName=bj;var bp="CollapsibleTrigger",bq=B.forwardRef((a,b)=>{let{__scopeCollapsible:c,...d}=a,e=bn(bp,c);return(0,A.jsx)(aa.Primitive.button,{type:"button","aria-controls":e.contentId,"aria-expanded":e.open||!1,"data-state":bu(e.open),"data-disabled":e.disabled?"":void 0,disabled:e.disabled,...d,ref:b,onClick:(0,R.composeEventHandlers)(a.onClick,e.onOpenToggle)})});bq.displayName=bp;var br="CollapsibleContent",bs=B.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=bn(br,a.__scopeCollapsible);return(0,A.jsx)(bi.Presence,{present:c||e.open,children:({present:a})=>(0,A.jsx)(bt,{...d,ref:b,present:a})})});bs.displayName=br;var bt=B.forwardRef((a,b)=>{let{__scopeCollapsible:c,present:d,children:e,...f}=a,g=bn(br,c),[h,i]=B.useState(d),j=B.useRef(null),k=(0,T.useComposedRefs)(b,j),l=B.useRef(0),m=l.current,n=B.useRef(0),o=n.current,p=g.open||h,q=B.useRef(p),r=B.useRef(void 0);return B.useEffect(()=>{let a=requestAnimationFrame(()=>q.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,ae.useLayoutEffect)(()=>{let a=j.current;if(a){r.current=r.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";let b=a.getBoundingClientRect();l.current=b.height,n.current=b.width,q.current||(a.style.transitionDuration=r.current.transitionDuration,a.style.animationName=r.current.animationName),i(d)}},[g.open,d]),(0,A.jsx)(aa.Primitive.div,{"data-state":bu(g.open),"data-disabled":g.disabled?"":void 0,id:g.contentId,hidden:!p,...f,ref:k,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":o?`${o}px`:void 0,...a.style},children:p&&e})});function bu(a){return a?"open":"closed"}var bv=a.i(52100);class bw extends Error{constructor(a,b="FunctionsError",c){super(a),this.name=b,this.context=c}}class bx extends bw{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class by extends bw{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class bz extends bw{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}(c=n||(n={})).Any="any",c.ApNortheast1="ap-northeast-1",c.ApNortheast2="ap-northeast-2",c.ApSouth1="ap-south-1",c.ApSoutheast1="ap-southeast-1",c.ApSoutheast2="ap-southeast-2",c.CaCentral1="ca-central-1",c.EuCentral1="eu-central-1",c.EuWest1="eu-west-1",c.EuWest2="eu-west-2",c.EuWest3="eu-west-3",c.SaEast1="sa-east-1",c.UsEast1="us-east-1",c.UsWest1="us-west-1",c.UsWest2="us-west-2";class bA{constructor(b,{headers:c={},customFetch:d,region:e=n.Any}={}){this.url=b,this.headers=c,this.region=e,this.fetch=(b=>{let c;return c=b||("undefined"==typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)})(d)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return(0,bv.__awaiter)(this,arguments,void 0,function*(a,b={}){var c;try{let d,{headers:e,method:f,body:g,signal:h}=b,i={},{region:j}=b;j||(j=this.region);let k=new URL(`${this.url}/${a}`);j&&"any"!==j&&(i["x-region"]=j,k.searchParams.set("forceFunctionRegion",j)),g&&(e&&!Object.prototype.hasOwnProperty.call(e,"Content-Type")||!e)?"undefined"!=typeof Blob&&g instanceof Blob||g instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",d=g):"string"==typeof g?(i["Content-Type"]="text/plain",d=g):"undefined"!=typeof FormData&&g instanceof FormData?d=g:(i["Content-Type"]="application/json",d=JSON.stringify(g)):d=g;let l=yield this.fetch(k.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),e),body:d,signal:h}).catch(a=>{if("AbortError"===a.name)throw a;throw new bx(a)}),m=l.headers.get("x-relay-error");if(m&&"true"===m)throw new by(l);if(!l.ok)throw new bz(l);let n=(null!=(c=l.headers.get("Content-Type"))?c:"text/plain").split(";")[0].trim();return{data:"application/json"===n?yield l.json():"application/octet-stream"===n||"application/pdf"===n?yield l.blob():"text/event-stream"===n?l:"multipart/form-data"===n?yield l.formData():yield l.text(),error:null,response:l}}catch(a){if(a instanceof Error&&"AbortError"===a.name)return{data:null,error:new bx(a)};return{data:null,error:a,response:a instanceof bz||a instanceof by?a.context:void 0}}})}}let{PostgrestClient:bB,PostgrestQueryBuilder:bC,PostgrestFilterBuilder:bD,PostgrestTransformBuilder:bE,PostgrestBuilder:bF,PostgrestError:bG}=a.i(79614).default,bH=class{static detectEnvironment(){var b;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==a.g.WebSocket)return{type:"native",constructor:a.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null==(b=navigator.userAgent)?void 0:b.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){let a=process.versions;if(a&&a.node){let b=parseInt(a.node.replace(/^v/,"").split(".")[0]);return b>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${b} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${b} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let a=this.detectEnvironment();if(a.constructor)return a.constructor;let b=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(b+=`

Suggested solution: ${a.workaround}`),Error(b)}static createWebSocket(a,b){return new(this.getWebSocketConstructor())(a,b)}static isWebSocketSupported(){try{let a=this.detectEnvironment();return"native"===a.type||"ws"===a.type}catch(a){return!1}}};(d=o||(o={}))[d.connecting=0]="connecting",d[d.open=1]="open",d[d.closing=2]="closing",d[d.closed=3]="closed",(e=p||(p={})).closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",(f=q||(q={})).close="phx_close",f.error="phx_error",f.join="phx_join",f.reply="phx_reply",f.leave="phx_leave",f.access_token="access_token",(r||(r={})).websocket="websocket",(g=s||(s={})).Connecting="connecting",g.Open="open",g.Closing="closing",g.Closed="closed";class bI{constructor(){this.HEADER_LENGTH=1}decode(a,b){return a.constructor===ArrayBuffer?b(this._binaryDecode(a)):"string"==typeof a?b(JSON.parse(a)):b({})}_binaryDecode(a){let b=new DataView(a),c=new TextDecoder;return this._decodeBroadcast(a,b,c)}_decodeBroadcast(a,b,c){let d=b.getUint8(1),e=b.getUint8(2),f=this.HEADER_LENGTH+2,g=c.decode(a.slice(f,f+d));f+=d;let h=c.decode(a.slice(f,f+e));return f+=e,{ref:null,topic:g,event:h,payload:JSON.parse(c.decode(a.slice(f,a.byteLength)))}}}class bJ{constructor(a,b){this.callback=a,this.timerCalc=b,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=b}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(h=t||(t={})).abstime="abstime",h.bool="bool",h.date="date",h.daterange="daterange",h.float4="float4",h.float8="float8",h.int2="int2",h.int4="int4",h.int4range="int4range",h.int8="int8",h.int8range="int8range",h.json="json",h.jsonb="jsonb",h.money="money",h.numeric="numeric",h.oid="oid",h.reltime="reltime",h.text="text",h.time="time",h.timestamp="timestamp",h.timestamptz="timestamptz",h.timetz="timetz",h.tsrange="tsrange",h.tstzrange="tstzrange";let bK=(a,b,c={})=>{var d;let e=null!=(d=c.skipTypes)?d:[];return b?Object.keys(b).reduce((c,d)=>(c[d]=bL(d,a,b,e),c),{}):{}},bL=(a,b,c,d)=>{let e=b.find(b=>b.name===a),f=null==e?void 0:e.type,g=c[a];return f&&!d.includes(f)?bM(f,g):bN(g)},bM=(a,b)=>{if("_"===a.charAt(0))return bR(b,a.slice(1,a.length));switch(a){case t.bool:return bO(b);case t.float4:case t.float8:case t.int2:case t.int4:case t.int8:case t.numeric:case t.oid:return bP(b);case t.json:case t.jsonb:return bQ(b);case t.timestamp:return bS(b);case t.abstime:case t.date:case t.daterange:case t.int4range:case t.int8range:case t.money:case t.reltime:case t.text:case t.time:case t.timestamptz:case t.timetz:case t.tsrange:case t.tstzrange:default:return bN(b)}},bN=a=>a,bO=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},bP=a=>{if("string"==typeof a){let b=parseFloat(a);if(!Number.isNaN(b))return b}return a},bQ=a=>{if("string"==typeof a)try{return JSON.parse(a)}catch(a){console.log(`JSON parse error: ${a}`)}return a},bR=(a,b)=>{if("string"!=typeof a)return a;let c=a.length-1,d=a[c];if("{"===a[0]&&"}"===d){let d,e=a.slice(1,c);try{d=JSON.parse("["+e+"]")}catch(a){d=e?e.split(","):[]}return d.map(a=>bM(b,a))}return a},bS=a=>"string"==typeof a?a.replace(" ","T"):a,bT=a=>{let b=new URL(a);return b.protocol=b.protocol.replace(/^ws/i,"http"),b.pathname=b.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===b.pathname||"/"===b.pathname?b.pathname="/api/broadcast":b.pathname=b.pathname+"/api/broadcast",b.href};class bU{constructor(a,b,c={},d=1e4){this.channel=a,this.event=b,this.payload=c,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,b){var c;return this._hasReceived(a)&&b(null==(c=this.receivedResp)?void 0:c.response),this.recHooks.push({status:a,callback:b}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let a=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,b){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:b})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:b}){this.recHooks.filter(b=>b.status===a).forEach(a=>a.callback(b))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}(i=u||(u={})).SYNC="sync",i.JOIN="join",i.LEAVE="leave";class bV{constructor(a,b){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=(null==b?void 0:b.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bV.syncState(this.state,a,b,c),this.pendingDiffs.forEach(a=>{this.state=bV.syncDiff(this.state,a,b,c)}),this.pendingDiffs=[],d()}),this.channel._on(c.diff,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=bV.syncDiff(this.state,a,b,c),d())}),this.onJoin((a,b,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:b,newPresences:c})}),this.onLeave((a,b,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:b,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,b,c,d){let e=this.cloneDeep(a),f=this.transformState(b),g={},h={};return this.map(e,(a,b)=>{f[a]||(h[a]=b)}),this.map(f,(a,b)=>{let c=e[a];if(c){let d=b.map(a=>a.presence_ref),e=c.map(a=>a.presence_ref),f=b.filter(a=>0>e.indexOf(a.presence_ref)),i=c.filter(a=>0>d.indexOf(a.presence_ref));f.length>0&&(g[a]=f),i.length>0&&(h[a]=i)}else g[a]=b}),this.syncDiff(e,{joins:g,leaves:h},c,d)}static syncDiff(a,b,c,d){let{joins:e,leaves:f}={joins:this.transformState(b.joins),leaves:this.transformState(b.leaves)};return c||(c=()=>{}),d||(d=()=>{}),this.map(e,(b,d)=>{var e;let f=null!=(e=a[b])?e:[];if(a[b]=this.cloneDeep(d),f.length>0){let c=a[b].map(a=>a.presence_ref),d=f.filter(a=>0>c.indexOf(a.presence_ref));a[b].unshift(...d)}c(b,f,d)}),this.map(f,(b,c)=>{let e=a[b];if(!e)return;let f=c.map(a=>a.presence_ref);e=e.filter(a=>0>f.indexOf(a.presence_ref)),a[b]=e,d(b,e,c),0===e.length&&delete a[b]}),a}static map(a,b){return Object.getOwnPropertyNames(a).map(c=>b(c,a[c]))}static transformState(a){return Object.getOwnPropertyNames(a=this.cloneDeep(a)).reduce((b,c)=>{let d=a[c];return"metas"in d?b[c]=d.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):b[c]=d,b},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(j=v||(v={})).ALL="*",j.INSERT="INSERT",j.UPDATE="UPDATE",j.DELETE="DELETE",(k=w||(w={})).BROADCAST="broadcast",k.PRESENCE="presence",k.POSTGRES_CHANGES="postgres_changes",k.SYSTEM="system",(l=x||(x={})).SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR";class bW{constructor(a,b={config:{}},c){var d,e;if(this.topic=a,this.params=b,this.socket=c,this.bindings={},this.state=p.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},b.config),this.timeout=this.socket.timeout,this.joinPush=new bU(this,q.join,this.params,this.timeout),this.rejoinTimer=new bJ(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=p.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=p.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=p.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=p.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=p.errored,this.rejoinTimer.scheduleTimeout())}),this._on(q.reply,{},(a,b)=>{this._trigger(this._replyEventName(b),a)}),this.presence=new bV(this),this.broadcastEndpointURL=bT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(e=null==(d=this.params.config)?void 0:d.broadcast)?void 0:e.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,b=this.timeout){var c,d,e;if(this.socket.isConnected()||this.socket.connect(),this.state==p.closed){let{config:{broadcast:f,presence:g,private:h}}=this.params,i=null!=(d=null==(c=this.bindings.postgres_changes)?void 0:c.map(a=>a.filter))?d:[],j=!!this.bindings[w.PRESENCE]&&this.bindings[w.PRESENCE].length>0||(null==(e=this.params.config.presence)?void 0:e.enabled)===!0,k={},l={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:j}),postgres_changes:i,private:h};this.socket.accessTokenValue&&(k.access_token=this.socket.accessTokenValue),this._onError(b=>null==a?void 0:a(x.CHANNEL_ERROR,b)),this._onClose(()=>null==a?void 0:a(x.CLOSED)),this.updateJoinPayload(Object.assign({config:l},k)),this.joinedOnce=!0,this._rejoin(b),this.joinPush.receive("ok",async({postgres_changes:b})=>{var c;if(this.socket.setAuth(),void 0===b){null==a||a(x.SUBSCRIBED);return}{let d=this.bindings.postgres_changes,e=null!=(c=null==d?void 0:d.length)?c:0,f=[];for(let c=0;c<e;c++){let e=d[c],{filter:{event:g,schema:h,table:i,filter:j}}=e,k=b&&b[c];if(k&&k.event===g&&k.schema===h&&k.table===i&&k.filter===j)f.push(Object.assign(Object.assign({},e),{id:k.id}));else{this.unsubscribe(),this.state=p.errored,null==a||a(x.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,a&&a(x.SUBSCRIBED);return}}).receive("error",b=>{this.state=p.errored,null==a||a(x.CHANNEL_ERROR,Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{null==a||a(x.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,b={}){return await this.send({type:"presence",event:"track",payload:a},b.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,b,c){return this.state===p.joined&&a===w.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,b,c)}async httpSend(a,b,c={}){var d;let e=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==b)return Promise.reject("Payload is required for httpSend()");let f={method:"POST",headers:{Authorization:e,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:b,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,null!=(d=c.timeout)?d:this.timeout);if(202===g.status)return{success:!0};let h=g.statusText;try{let a=await g.json();h=a.error||a.message||h}catch(a){}return Promise.reject(Error(h))}async send(a,b={}){var c,d;if(this._canPush()||"broadcast"!==a.type)return new Promise(c=>{var d,e,f;let g=this._push(a.type,a,b.timeout||this.timeout);"broadcast"!==a.type||(null==(f=null==(e=null==(d=this.params)?void 0:d.config)?void 0:e.broadcast)?void 0:f.ack)||c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:e,payload:f}=a,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:f,private:this.private}]})};try{let a=await this._fetchWithTimeout(this.broadcastEndpointURL,g,null!=(c=b.timeout)?c:this.timeout);return await (null==(d=a.body)?void 0:d.cancel()),a.ok?"ok":"error"}catch(a){if("AbortError"===a.name)return"timed out";return"error"}}}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=p.leaving;let b=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(q.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(d=>{(c=new bU(this,q.leave,{},a)).receive("ok",()=>{b(),d("ok")}).receive("timeout",()=>{b(),d("timed out")}).receive("error",()=>{d("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{null==c||c.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=p.closed,this.bindings={}}async _fetchWithTimeout(a,b,c){let d=new AbortController,e=setTimeout(()=>d.abort(),c),f=await this.socket.fetch(a,Object.assign(Object.assign({},b),{signal:d.signal}));return clearTimeout(e),f}_push(a,b,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new bU(this,a,b,c);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>100){let a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(a,b,c){return b}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,b,c){var d,e;let f=a.toLocaleLowerCase(),{close:g,error:h,leave:i,join:j}=q;if(c&&[g,h,i,j].indexOf(f)>=0&&c!==this._joinRef())return;let k=this._onMessage(f,b,c);if(b&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?null==(d=this.bindings.postgres_changes)||d.filter(a=>{var b,c,d;return(null==(b=a.filter)?void 0:b.event)==="*"||(null==(d=null==(c=a.filter)?void 0:c.event)?void 0:d.toLocaleLowerCase())===f}).map(a=>a.callback(k,c)):null==(e=this.bindings[f])||e.filter(a=>{var c,d,e,g,h,i;if(!["broadcast","presence","postgres_changes"].includes(f))return a.type.toLocaleLowerCase()===f;if("id"in a){let f=a.id,g=null==(c=a.filter)?void 0:c.event;return f&&(null==(d=b.ids)?void 0:d.includes(f))&&("*"===g||(null==g?void 0:g.toLocaleLowerCase())===(null==(e=b.data)?void 0:e.type.toLocaleLowerCase()))}{let c=null==(h=null==(g=null==a?void 0:a.filter)?void 0:g.event)?void 0:h.toLocaleLowerCase();return"*"===c||c===(null==(i=null==b?void 0:b.event)?void 0:i.toLocaleLowerCase())}}).map(a=>{if("object"==typeof k&&"ids"in k){let a=k.data,{schema:b,table:c,commit_timestamp:d,type:e,errors:f}=a;k=Object.assign(Object.assign({},{schema:b,table:c,commit_timestamp:d,eventType:e,new:{},old:{},errors:f}),this._getPayloadRecords(a))}a.callback(k,c)})}_isClosed(){return this.state===p.closed}_isJoined(){return this.state===p.joined}_isJoining(){return this.state===p.joining}_isLeaving(){return this.state===p.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,b,c){let d=a.toLocaleLowerCase(),e={type:d,filter:b,callback:c};return this.bindings[d]?this.bindings[d].push(e):this.bindings[d]=[e],this}_off(a,b){let c=a.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(a=>{var d;return!((null==(d=a.type)?void 0:d.toLocaleLowerCase())===c&&bW.isEqual(a.filter,b))})),this}static isEqual(a,b){if(Object.keys(a).length!==Object.keys(b).length)return!1;for(let c in a)if(a[c]!==b[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(q.close,{},a)}_onError(a){this._on(q.error,{},b=>a(b))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=p.joining,this.joinPush.resend(a))}_getPayloadRecords(a){let b={new:{},old:{}};return("INSERT"===a.type||"UPDATE"===a.type)&&(b.new=bK(a.columns,a.record)),("UPDATE"===a.type||"DELETE"===a.type)&&(b.old=bK(a.columns,a.old_record)),b}}let bX=()=>{},bY=[1e3,2e3,5e3,1e4],bZ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class b${constructor(b,c){var d;if(this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bX,this.ref=0,this.reconnectTimer=null,this.logger=bX,this.conn=null,this.sendBuffer=[],this.serializer=new bI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=b=>{let c;return c=b||("undefined"==typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)).catch(a=>{throw Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...a)=>c(...a)},!(null==(d=null==c?void 0:c.params)?void 0:d.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=c.params.apikey,this.endPoint=`${b}/${r.websocket}`,this.httpEndpoint=bT(b),this._initializeOptions(c),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==c?void 0:c.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bH.createWebSocket(this.endpointURL())}catch(b){this._setConnectionState("disconnected");let a=b.message;if(a.includes("Node.js"))throw Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(a,b){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},a?this.conn.close(a,null!=b?b:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){let b=await a.unsubscribe();return 0===this.channels.length&&this.disconnect(),b}async removeAllChannels(){let a=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,b,c){this.logger(a,b,c)}connectionState(){switch(this.conn&&this.conn.readyState){case o.connecting:return s.Connecting;case o.open:return s.Open;case o.closing:return s.Closing;default:return s.Closed}}isConnected(){return this.connectionState()===s.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(a,b={config:{}}){let c=`realtime:${a}`,d=this.getChannels().find(a=>a.topic===c);if(d)return d;{let c=new bW(`realtime:${a}`,b,this);return this.channels.push(c),c}}push(a){let{topic:b,event:c,payload:d,ref:e}=a,f=()=>{this.encode(a,a=>{var b;null==(b=this.conn)||b.send(a)})};this.log("push",`${b} ${c} (${e})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,null==(a=this.conn)||a.close(1e3,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||null==(a=this.reconnectTimer)||a.scheduleTimeout()},100);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let b=this.channels.find(b=>b.topic===a&&(b._isJoined()||b._isJoining()));b&&(this.log("transport",`leaving duplicate topic "${a}"`),b.unsubscribe())}_remove(a){this.channels=this.channels.filter(b=>b.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,a=>{if("phoenix"===a.topic&&"phx_reply"===a.event)try{this.heartbeatCallback("ok"===a.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:b,event:c,payload:d,ref:e}=a,f=e?`(${e})`:"",g=d.status||"";this.log("receive",`${g} ${b} ${c} ${f}`.trim(),d),this.channels.filter(a=>a._isMember(b)).forEach(a=>a._trigger(c,d,e)),this._triggerStateCallbacks("message",a)})}_clearTimer(a){var b;"heartbeat"===a&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===a&&(null==(b=this.reconnectTimer)||b.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{"keepAlive"===a.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var b;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(b=this.reconnectTimer)||b.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(q.error))}_appendParams(a,b){if(0===Object.keys(b).length)return a;let c=a.match(/\?/)?"&":"?",d=new URLSearchParams(b);return`${a}${c}${d}`}_workerObjectUrl(a){let b;if(a)b=a;else{let a=new Blob([bZ],{type:"application/javascript"});b=URL.createObjectURL(a)}return b}_setConnectionState(a,b=!1){this._connectionState=a,"connecting"===a?this._wasManualDisconnect=!1:"disconnecting"===a&&(this._wasManualDisconnect=b)}async _performAuth(a=null){let b;b=a||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=b&&(this.accessTokenValue=b,this.channels.forEach(a=>{b&&a.updateJoinPayload({access_token:b,version:"realtime-js/2.76.1"}),a.joinedOnce&&a._isJoined()&&a._push(q.access_token,{access_token:b})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(b=>{this.log("error",`error setting auth in ${a}`,b)})}_triggerStateCallbacks(a,b){try{this.stateChangeCallbacks[a].forEach(c=>{try{c(b)}catch(b){this.log("error",`error in ${a} callback`,b)}})}catch(b){this.log("error",`error triggering ${a} callbacks`,b)}}_setupReconnectionTimer(){this.reconnectTimer=new bJ(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(a){var b,c,d,e,f,g,h,i,j;this.transport=null!=(b=null==a?void 0:a.transport)?b:null,this.timeout=null!=(c=null==a?void 0:a.timeout)?c:1e4,this.heartbeatIntervalMs=null!=(d=null==a?void 0:a.heartbeatIntervalMs)?d:25e3,this.worker=null!=(e=null==a?void 0:a.worker)&&e,this.accessToken=null!=(f=null==a?void 0:a.accessToken)?f:null,this.heartbeatCallback=null!=(g=null==a?void 0:a.heartbeatCallback)?g:bX,(null==a?void 0:a.params)&&(this.params=a.params),(null==a?void 0:a.logger)&&(this.logger=a.logger),((null==a?void 0:a.logLevel)||(null==a?void 0:a.log_level))&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(h=null==a?void 0:a.reconnectAfterMs)?h:a=>bY[a-1]||1e4,this.encode=null!=(i=null==a?void 0:a.encode)?i:(a,b)=>b(JSON.stringify(a)),this.decode=null!=(j=null==a?void 0:a.decode)?j:this.serializer.decode.bind(this.serializer),this.worker&&(this.workerUrl=null==a?void 0:a.workerUrl)}}class b_ extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function b0(a){return"object"==typeof a&&null!==a&&"__isStorageError"in a}class b1 extends b_{constructor(a,b,c){super(a),this.name="StorageApiError",this.status=b,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class b2 extends b_{constructor(a,b){super(a),this.name="StorageUnknownError",this.originalError=b}}let b3=b=>{let c;return c=b||("undefined"==typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},b4=a=>{if(Array.isArray(a))return a.map(a=>b4(a));if("function"==typeof a||a!==Object(a))return a;let b={};return Object.entries(a).forEach(([a,c])=>{b[a.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""))]=b4(c)}),b},b5=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a);function b6(b,c,d,e,f,g){return(0,bv.__awaiter)(this,void 0,void 0,function*(){return new Promise((h,i)=>{let j;b(d,(j={method:c,headers:(null==e?void 0:e.headers)||{}},"GET"===c||!g?j:((a=>{if("object"!=typeof a||null===a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)})(g)?(j.headers=Object.assign({"Content-Type":"application/json"},null==e?void 0:e.headers),j.body=JSON.stringify(g)):j.body=g,(null==e?void 0:e.duplex)&&(j.duplex=e.duplex),Object.assign(Object.assign({},j),f)))).then(a=>{if(!a.ok)throw a;return(null==e?void 0:e.noResolveJson)?a:a.json()}).then(a=>h(a)).catch(b=>(0,bv.__awaiter)(void 0,void 0,void 0,function*(){b instanceof(yield(0,bv.__awaiter)(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield a.A(59789)).Response:Response}))&&!(null==e?void 0:e.noResolveJson)?b.json().then(a=>{let c=b.status||500,d=(null==a?void 0:a.statusCode)||c+"";i(new b1(b5(a),c,d))}).catch(a=>{i(new b2(b5(a),a))}):i(new b2(b5(b),b))}))})})}function b7(a,b,c,d){return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b6(a,"GET",b,c,d)})}function b8(a,b,c,d,e){return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b6(a,"POST",b,d,e,c)})}function b9(a,b,c,d,e){return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b6(a,"PUT",b,d,e,c)})}function ca(a,b,c,d,e){return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b6(a,"DELETE",b,d,e,c)})}class cb{constructor(a,b){this.downloadFn=a,this.shouldThrowOnError=b}then(a,b){return this.execute().then(a,b)}execute(){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}}y=Symbol.toStringTag;let cc=class{constructor(a,b){this.downloadFn=a,this.shouldThrowOnError=b,this[y]="BlobDownloadBuilder",this.promise=null}asStream(){return new cb(this.downloadFn,this.shouldThrowOnError)}then(a,b){return this.getPromise().then(a,b)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{let a=yield this.downloadFn();return{data:yield a.blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}},cd={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ce={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cf{constructor(a,b={},c,d){this.shouldThrowOnError=!1,this.url=a,this.headers=b,this.bucketId=c,this.fetch=b3(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(a,b,c,d){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{let e,f=Object.assign(Object.assign({},ce),d),g=Object.assign(Object.assign({},this.headers),"POST"===a&&{"x-upsert":String(f.upsert)}),h=f.metadata;"undefined"!=typeof Blob&&c instanceof Blob?((e=new FormData).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h)),e.append("",c)):"undefined"!=typeof FormData&&c instanceof FormData?((e=c).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h))):(e=c,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,h&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),(null==d?void 0:d.headers)&&(g=Object.assign(Object.assign({},g),d.headers));let i=this._removeEmptyFolders(b),j=this._getFinalPath(i),k=yield("PUT"==a?b9:b8)(this.fetch,`${this.url}/object/${j}`,e,Object.assign({headers:g},(null==f?void 0:f.duplex)?{duplex:f.duplex}:{}));return{data:{path:i,id:k.Id,fullPath:k.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}upload(a,b,c){return(0,bv.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,b,c)})}uploadToSignedUrl(a,b,c,d){return(0,bv.__awaiter)(this,void 0,void 0,function*(){let e=this._removeEmptyFolders(a),f=this._getFinalPath(e),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",b);try{let a,b=Object.assign({upsert:ce.upsert},d),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(b.upsert)});"undefined"!=typeof Blob&&c instanceof Blob?((a=new FormData).append("cacheControl",b.cacheControl),a.append("",c)):"undefined"!=typeof FormData&&c instanceof FormData?(a=c).append("cacheControl",b.cacheControl):(a=c,f["cache-control"]=`max-age=${b.cacheControl}`,f["content-type"]=b.contentType);let h=yield b9(this.fetch,g.toString(),a,{headers:f});return{data:{path:e,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(a,b){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{let c=this._getFinalPath(a),d=Object.assign({},this.headers);(null==b?void 0:b.upsert)&&(d["x-upsert"]="true");let e=yield b8(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:d}),f=new URL(this.url+e.url),g=f.searchParams.get("token");if(!g)throw new b_("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:g},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}update(a,b,c){return(0,bv.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,b,c)})}move(a,b,c){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield b8(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}copy(a,b,c){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield b8(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}createSignedUrl(a,b,c){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{let d=this._getFinalPath(a),e=yield b8(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:b},(null==c?void 0:c.transform)?{transform:c.transform}:{}),{headers:this.headers}),f=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:e={signedUrl:encodeURI(`${this.url}${e.signedURL}${f}`)},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}createSignedUrls(a,b,c){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{let d=yield b8(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:b,paths:a},{headers:this.headers}),e=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:d.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${e}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}download(a,b){let c=void 0!==(null==b?void 0:b.transform)?"render/image/authenticated":"object",d=this.transformOptsToQueryString((null==b?void 0:b.transform)||{}),e=d?`?${d}`:"",f=this._getFinalPath(a);return new cc(()=>b7(this.fetch,`${this.url}/${c}/${f}${e}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){let b=this._getFinalPath(a);try{let a=yield b7(this.fetch,`${this.url}/object/info/${b}`,{headers:this.headers});return{data:b4(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}exists(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){let b=this._getFinalPath(a);try{return yield function(a,b,c,d){return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b6(a,"HEAD",b,Object.assign(Object.assign({},c),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${b}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a)&&a instanceof b2){let b=a.originalError;if([400,404].includes(null==b?void 0:b.status))return{data:!1,error:a}}throw a}})}getPublicUrl(a,b){let c=this._getFinalPath(a),d=[],e=(null==b?void 0:b.download)?`download=${!0===b.download?"":b.download}`:"";""!==e&&d.push(e);let f=void 0!==(null==b?void 0:b.transform),g=this.transformOptsToQueryString((null==b?void 0:b.transform)||{});""!==g&&d.push(g);let h=d.join("&");return""!==h&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${f?"render/image":"object"}/public/${c}${h}`)}}}remove(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}list(a,b,c){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{let d=Object.assign(Object.assign(Object.assign({},cd),b),{prefix:a||""});return{data:yield b8(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},c),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}listV2(a,b){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{let c=Object.assign({},a);return{data:yield b8(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},b),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return"undefined"!=typeof Buffer?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){let b=[];return a.width&&b.push(`width=${a.width}`),a.height&&b.push(`height=${a.height}`),a.resize&&b.push(`resize=${a.resize}`),a.format&&b.push(`format=${a.format}`),a.quality&&b.push(`quality=${a.quality}`),b.join("&")}}let cg="2.76.1",ch={"X-Client-Info":`storage-js/${cg}`};class ci{constructor(a,b={},c,d){this.shouldThrowOnError=!1;const e=new URL(a);(null==d?void 0:d.useNewHostname)&&/supabase\.(co|in|red)$/.test(e.hostname)&&!e.hostname.includes("storage.supabase.")&&(e.hostname=e.hostname.replace("supabase.","storage.supabase.")),this.url=e.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ch),b),this.fetch=b3(c)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield b7(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}getBucket(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield b7(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}createBucket(a){return(0,bv.__awaiter)(this,arguments,void 0,function*(a,b={public:!1}){try{return{data:yield b8(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:b.type,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}updateBucket(a,b){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield b9(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}emptyBucket(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield b8(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}deleteBucket(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}}class cj{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ch),b),this.fetch=b3(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield b8(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}listBuckets(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{let b=new URLSearchParams;(null==a?void 0:a.limit)!==void 0&&b.set("limit",a.limit.toString()),(null==a?void 0:a.offset)!==void 0&&b.set("offset",a.offset.toString()),(null==a?void 0:a.sortColumn)&&b.set("sortColumn",a.sortColumn),(null==a?void 0:a.sortOrder)&&b.set("sortOrder",a.sortOrder),(null==a?void 0:a.search)&&b.set("search",a.search);let c=b.toString(),d=c?`${this.url}/bucket?${c}`:`${this.url}/bucket`,e=yield b7(this.fetch,d,{headers:this.headers});return{data:Array.isArray(e)?e.filter(a=>"ANALYTICS"===a.type):[],error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}deleteBucket(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b0(a))return{data:null,error:a};throw a}})}}let ck={"X-Client-Info":`storage-js/${cg}`,"Content-Type":"application/json"};class cl extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function cm(a){return"object"==typeof a&&null!==a&&"__isStorageVectorsError"in a}class cn extends cl{constructor(a,b,c){super(a),this.name="StorageVectorsApiError",this.status=b,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class co extends cl{constructor(a,b){super(a),this.name="StorageVectorsUnknownError",this.originalError=b}}(m=z||(z={})).InternalError="InternalError",m.S3VectorConflictException="S3VectorConflictException",m.S3VectorNotFoundException="S3VectorNotFoundException",m.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",m.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",m.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";let cp=b=>{let c;return c=b||("undefined"==typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},cq=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a);function cr(a,b,c,d,e){return(0,bv.__awaiter)(this,void 0,void 0,function*(){return function(a,b,c,d,e,f){return(0,bv.__awaiter)(this,void 0,void 0,function*(){return new Promise((g,h)=>{let i;a(c,(i={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b||!f?i:((a=>{if("object"!=typeof a||null===a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)})(f)?(i.headers=Object.assign({"Content-Type":"application/json"},null==d?void 0:d.headers),i.body=JSON.stringify(f)):i.body=f,Object.assign(Object.assign({},i),e)))).then(a=>{if(!a.ok)throw a;if(null==d?void 0:d.noResolveJson)return a;let b=a.headers.get("content-type");return b&&b.includes("application/json")?a.json():{}}).then(a=>g(a)).catch(a=>(0,bv.__awaiter)(void 0,void 0,void 0,function*(){if(!(a&&"object"==typeof a&&"status"in a&&"ok"in a&&"number"==typeof a.status)||(null==d?void 0:d.noResolveJson))h(new co(cq(a),a));else{let b=a.status||500;"function"==typeof a.json?a.json().then(a=>{let c=(null==a?void 0:a.statusCode)||(null==a?void 0:a.code)||b+"";h(new cn(cq(a),b,c))}).catch(()=>{h(new cn(a.statusText||`HTTP ${b} error`,b,b+""))}):h(new cn(a.statusText||`HTTP ${b} error`,b,b+""))}}))})})}(a,"POST",b,d,e,c)})}class cs{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ck),b),this.fetch=cp(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield cr(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}getIndex(a,b){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:b},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}listIndexes(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}deleteIndex(a,b){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield cr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:b},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}}class ct{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ck),b),this.fetch=cp(c)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{if(a.vectors.length<1||a.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:(yield cr(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}getVectors(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}listVectors(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==a.segmentCount){if(a.segmentCount<1||a.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==a.segmentIndex&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:yield cr(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}queryVectors(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}deleteVectors(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{if(a.keys.length<1||a.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:(yield cr(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}}class cu{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ck),b),this.fetch=cp(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield cr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}getBucket(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}listBuckets(){return(0,bv.__awaiter)(this,arguments,void 0,function*(a={}){try{return{data:yield cr(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}deleteBucket(a){return(0,bv.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield cr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cm(a))return{data:null,error:a};throw a}})}}class cv extends cu{constructor(a,b={}){super(a,b.headers||{},b.fetch)}from(a){return new cw(this.url,this.headers,a,this.fetch)}}class cw extends cs{constructor(a,b,c,d){super(a,b,d),this.vectorBucketName=c}createIndex(a){let b=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b.createIndex.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let a=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,bv.__awaiter)(this,arguments,void 0,function*(b={}){return a.listIndexes.call(this,Object.assign(Object.assign({},b),{vectorBucketName:this.vectorBucketName}))})}getIndex(a){let b=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b.getIndex.call(this,this.vectorBucketName,a)})}deleteIndex(a){let b=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b.deleteIndex.call(this,this.vectorBucketName,a)})}index(a){return new cx(this.url,this.headers,this.vectorBucketName,a,this.fetch)}}class cx extends ct{constructor(a,b,c,d,e){super(a,b,e),this.vectorBucketName=c,this.indexName=d}putVectors(a){let b=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b.putVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(a){let b=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b.getVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let a=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,bv.__awaiter)(this,arguments,void 0,function*(b={}){return a.listVectors.call(this,Object.assign(Object.assign({},b),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(a){let b=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b.queryVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(a){let b=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,bv.__awaiter)(this,void 0,void 0,function*(){return b.deleteVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class cy extends ci{constructor(a,b={},c,d){super(a,b,c,d)}from(a){return new cf(this.url,this.headers,a,this.fetch)}get vectors(){return new cv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new cj(this.url+"/iceberg",this.headers,this.fetch)}}let cz="";cz="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let cA={headers:{"X-Client-Info":`supabase-js-${cz}/2.76.1`}},cB={schema:"public"},cC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cD={};var cE=a.i(23952);let cF="2.76.1",cG={"X-Client-Info":`gotrue-js/${cF}`},cH="X-Supabase-Api-Version",cI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cJ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class cK extends Error{constructor(a,b,c){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=b,this.code=c}}function cL(a){return"object"==typeof a&&null!==a&&"__isAuthError"in a}class cM extends cK{constructor(a,b,c){super(a,b,c),this.name="AuthApiError",this.status=b,this.code=c}}class cN extends cK{constructor(a,b){super(a),this.name="AuthUnknownError",this.originalError=b}}class cO extends cK{constructor(a,b,c,d){super(a,c,d),this.name=b,this.status=c}}class cP extends cO{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class cQ extends cO{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cR extends cO{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class cS extends cO{constructor(a,b=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=b}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cT extends cO{constructor(a,b){super(a,"AuthRetryableFetchError",b,void 0)}}function cU(a){return cL(a)&&"AuthRetryableFetchError"===a.name}class cV extends cO{constructor(a,b,c){super(a,"AuthWeakPasswordError",b,"weak_password"),this.reasons=c}}class cW extends cO{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}let cX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cY=" 	\n\r=".split(""),cZ=(()=>{let a=Array(128);for(let b=0;b<a.length;b+=1)a[b]=-1;for(let b=0;b<cY.length;b+=1)a[cY[b].charCodeAt(0)]=-2;for(let b=0;b<cX.length;b+=1)a[cX[b].charCodeAt(0)]=b;return a})();function c$(a,b,c){if(null!==a)for(b.queue=b.queue<<8|a,b.queuedBits+=8;b.queuedBits>=6;)c(cX[b.queue>>b.queuedBits-6&63]),b.queuedBits-=6;else if(b.queuedBits>0)for(b.queue=b.queue<<6-b.queuedBits,b.queuedBits=6;b.queuedBits>=6;)c(cX[b.queue>>b.queuedBits-6&63]),b.queuedBits-=6}function c_(a,b,c){let d=cZ[a];if(d>-1)for(b.queue=b.queue<<6|d,b.queuedBits+=6;b.queuedBits>=8;)c(b.queue>>b.queuedBits-8&255),b.queuedBits-=8;else if(-2===d)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}function c0(a){let b=[],c=a=>{b.push(String.fromCodePoint(a))},d={utf8seq:0,codepoint:0},e={queue:0,queuedBits:0},f=a=>{!function(a,b,c){if(0===b.utf8seq){if(a<=127)return c(a);for(let c=1;c<6;c+=1)if((a>>7-c&1)==0){b.utf8seq=c;break}if(2===b.utf8seq)b.codepoint=31&a;else if(3===b.utf8seq)b.codepoint=15&a;else if(4===b.utf8seq)b.codepoint=7&a;else throw Error("Invalid UTF-8 sequence");b.utf8seq-=1}else if(b.utf8seq>0){if(a<=127)throw Error("Invalid UTF-8 sequence");b.codepoint=b.codepoint<<6|63&a,b.utf8seq-=1,0===b.utf8seq&&c(b.codepoint)}}(a,d,c)};for(let b=0;b<a.length;b+=1)c_(a.charCodeAt(b),e,f);return b.join("")}function c1(a){let b=[],c={queue:0,queuedBits:0},d=a=>{b.push(a)};for(let b=0;b<a.length;b+=1)c_(a.charCodeAt(b),c,d);return new Uint8Array(b)}function c2(a){let b=[],c={queue:0,queuedBits:0},d=a=>{b.push(a)};return a.forEach(a=>c$(a,c,d)),c$(null,c,d),b.join("")}let c3=b=>{let c;return c=b||("undefined"==typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},c4=async(a,b,c)=>{await a.setItem(b,JSON.stringify(c))},c5=async(a,b)=>{let c=await a.getItem(b);if(!c)return null;try{return JSON.parse(c)}catch(a){return c}},c6=async(a,b)=>{await a.removeItem(b)};class c7{constructor(){this.promise=new c7.promiseConstructor((a,b)=>{this.resolve=a,this.reject=b})}}function c8(a){let b=a.split(".");if(3!==b.length)throw new cW("Invalid JWT structure");for(let a=0;a<b.length;a++)if(!cJ.test(b[a]))throw new cW("JWT not in base64url format");return{header:JSON.parse(c0(b[0])),payload:JSON.parse(c0(b[1])),signature:c1(b[2]),raw:{header:b[0],payload:b[1]}}}async function c9(a){return await new Promise(b=>{setTimeout(()=>b(null),a)})}function da(a){return("0"+a.toString(16)).substr(-2)}async function db(a){let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>String.fromCharCode(a)).join("")}async function dc(a){return"undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder?(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a):btoa(await db(a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dd(a,b,c=!1){let d=function(){let a=new Uint32Array(56);if("undefined"==typeof crypto){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",b=a.length,c="";for(let d=0;d<56;d++)c+=a.charAt(Math.floor(Math.random()*b));return c}return crypto.getRandomValues(a),Array.from(a,da).join("")}(),e=d;c&&(e+="/PASSWORD_RECOVERY"),await c4(a,`${b}-code-verifier`,e);let f=await dc(d),g=d===f?"plain":"s256";return[f,g]}c7.promiseConstructor=Promise;let de=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,df=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function dg(a){if(!df.test(a))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function dh(){return new Proxy({},{get:(a,b)=>{if("__isUserNotAvailableProxy"===b)return!0;if("symbol"==typeof b){let a=b.toString();if("Symbol(Symbol.toPrimitive)"===a||"Symbol(Symbol.toStringTag)"===a||"Symbol(util.inspect.custom)"===a)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${b}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,b)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${b}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,b)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${b}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function di(a){return JSON.parse(JSON.stringify(a))}let dj=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),dk=[502,503,504];async function dl(a){var b;let c,d;if(!("object"==typeof a&&null!==a&&"status"in a&&"ok"in a&&"json"in a&&"function"==typeof a.json))throw new cT(dj(a),0);if(dk.includes(a.status))throw new cT(dj(a),a.status);try{c=await a.json()}catch(a){throw new cN(dj(a),a)}let e=function(a){let b=a.headers.get(cH);if(!b||!b.match(de))return null;try{return new Date(`${b}T00:00:00.0Z`)}catch(a){return null}}(a);if(e&&e.getTime()>=cI["2024-01-01"].timestamp&&"object"==typeof c&&c&&"string"==typeof c.code?d=c.code:"object"==typeof c&&c&&"string"==typeof c.error_code&&(d=c.error_code),d){if("weak_password"===d)throw new cV(dj(c),a.status,(null==(b=c.weak_password)?void 0:b.reasons)||[]);else if("session_not_found"===d)throw new cP}else if("object"==typeof c&&c&&"object"==typeof c.weak_password&&c.weak_password&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0))throw new cV(dj(c),a.status,c.weak_password.reasons);throw new cM(dj(c),a.status||500,d)}async function dm(a,b,c,d){var e;let f=Object.assign({},null==d?void 0:d.headers);f[cH]||(f[cH]=cI["2024-01-01"].name),(null==d?void 0:d.jwt)&&(f.Authorization=`Bearer ${d.jwt}`);let g=null!=(e=null==d?void 0:d.query)?e:{};(null==d?void 0:d.redirectTo)&&(g.redirect_to=d.redirectTo);let h=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",i=await dn(a,b,c+h,{headers:f,noResolveJson:null==d?void 0:d.noResolveJson},{},null==d?void 0:d.body);return(null==d?void 0:d.xform)?null==d?void 0:d.xform(i):{data:Object.assign({},i),error:null}}async function dn(a,b,c,d,e,f){let g,h,i=(h={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==d?void 0:d.headers),h.body=JSON.stringify(f),Object.assign(Object.assign({},h),e)));try{g=await a(c,Object.assign({},i))}catch(a){throw console.error(a),new cT(dj(a),0)}if(g.ok||await dl(g),null==d?void 0:d.noResolveJson)return g;try{return await g.json()}catch(a){await dl(a)}}function dp(a){var b,c,d;let e=null;(d=a).access_token&&d.refresh_token&&d.expires_in&&(e=Object.assign({},a),a.expires_at||(e.expires_at=(c=a.expires_in,Math.round(Date.now()/1e3)+c)));return{data:{session:e,user:null!=(b=a.user)?b:a},error:null}}function dq(a){let b=dp(a);return!b.error&&a.weak_password&&"object"==typeof a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&"string"==typeof a.weak_password.message&&a.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0)&&(b.data.weak_password=a.weak_password),b}function dr(a){var b;return{data:{user:null!=(b=a.user)?b:a},error:null}}function ds(a){return{data:a,error:null}}function dt(a){let{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f}=a;return{data:{properties:{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f},user:Object.assign({},(0,bv.__rest)(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function du(a){return a}let dv=["global","local","others"];class dw{constructor({url:a="",headers:b={},fetch:c}){this.url=a,this.headers=b,this.fetch=c3(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,b=dv[0]){if(0>dv.indexOf(b))throw Error(`@supabase/auth-js: Parameter scope must be one of ${dv.join(", ")}`);try{return await dm(this.fetch,"POST",`${this.url}/logout?scope=${b}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(a){if(cL(a))return{data:null,error:a};throw a}}async inviteUserByEmail(a,b={}){try{return await dm(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:b.data},headers:this.headers,redirectTo:b.redirectTo,xform:dr})}catch(a){if(cL(a))return{data:{user:null},error:a};throw a}}async generateLink(a){try{let{options:b}=a,c=(0,bv.__rest)(a,["options"]),d=Object.assign(Object.assign({},c),b);return"newEmail"in c&&(d.new_email=null==c?void 0:c.newEmail,delete d.newEmail),await dm(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:dt,redirectTo:null==b?void 0:b.redirectTo})}catch(a){if(cL(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(a){try{return await dm(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:dr})}catch(a){if(cL(a))return{data:{user:null},error:a};throw a}}async listUsers(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await dm(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:du});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(cL(a))return{data:{users:[]},error:a};throw a}}async getUserById(a){dg(a);try{return await dm(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:dr})}catch(a){if(cL(a))return{data:{user:null},error:a};throw a}}async updateUserById(a,b){dg(a);try{return await dm(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:b,headers:this.headers,xform:dr})}catch(a){if(cL(a))return{data:{user:null},error:a};throw a}}async deleteUser(a,b=!1){dg(a);try{return await dm(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:b},xform:dr})}catch(a){if(cL(a))return{data:{user:null},error:a};throw a}}async _listFactors(a){dg(a.userId);try{let{data:b,error:c}=await dm(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:b,error:c}}catch(a){if(cL(a))return{data:null,error:a};throw a}}async _deleteFactor(a){dg(a.userId),dg(a.id);try{return{data:await dm(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(a){if(cL(a))return{data:null,error:a};throw a}}async _listOAuthClients(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await dm(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:du});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(cL(a))return{data:{clients:[]},error:a};throw a}}async _createOAuthClient(a){try{return await dm(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cL(a))return{data:null,error:a};throw a}}async _getOAuthClient(a){try{return await dm(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cL(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(a){try{return await dm(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cL(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(a){try{return await dm(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cL(a))return{data:null,error:a};throw a}}}function dx(a={}){return{getItem:b=>a[b]||null,setItem:(b,c)=>{a[b]=c},removeItem:b=>{delete a[b]}}}globalThis;class dy extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}function dz(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}class dA extends Error{constructor({message:a,code:b,cause:c,name:d}){var e;super(a,{cause:c}),this.__isWebAuthnError=!0,this.name=null!=(e=null!=d?d:c instanceof Error?c.name:void 0)?e:"Unknown Error",this.code=b}}class dB extends dA{constructor(a,b){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:b,message:a}),this.name="WebAuthnUnknownError",this.originalError=b}}let dC=new class{createNewAbortSignal(){if(this.controller){let a=Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}let a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){let a=Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}};function dD(a){return"localhost"===a||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}async function dE(a){try{let b=await navigator.credentials.create(a);if(!b)return{data:null,error:new dB("Empty credential response",b)};if(!(b instanceof PublicKeyCredential))return{data:null,error:new dB("Browser returned unexpected credential type",b)};return{data:b,error:null}}catch(b){return{data:null,error:function({error:a,options:b}){var c,d,e;let{publicKey:f}=b;if(!f)throw Error("options was missing required publicKey property");if("AbortError"===a.name){if(b.signal instanceof AbortSignal)return new dA({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if("ConstraintError"===a.name){if((null==(c=f.authenticatorSelection)?void 0:c.requireResidentKey)===!0)return new dA({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});else if("conditional"===b.mediation&&(null==(d=f.authenticatorSelection)?void 0:d.userVerification)==="required")return new dA({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});else if((null==(e=f.authenticatorSelection)?void 0:e.userVerification)==="required")return new dA({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else if("InvalidStateError"===a.name)return new dA({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});else if("NotAllowedError"===a.name)return new dA({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});else if("NotSupportedError"===a.name)return new dA(0===f.pubKeyCredParams.filter(a=>"public-key"===a.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});else if("SecurityError"===a.name){let b=window.location.hostname;if(!dD(b))return new dA({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a});if(f.rp.id!==b)return new dA({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else if("TypeError"===a.name){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new dA({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if("UnknownError"===a.name)return new dA({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a});return new dA({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}({error:b,options:a})}}}async function dF(a){try{let b=await navigator.credentials.get(a);if(!b)return{data:null,error:new dB("Empty credential response",b)};if(!(b instanceof PublicKeyCredential))return{data:null,error:new dB("Browser returned unexpected credential type",b)};return{data:b,error:null}}catch(b){return{data:null,error:function({error:a,options:b}){let{publicKey:c}=b;if(!c)throw Error("options was missing required publicKey property");if("AbortError"===a.name){if(b.signal instanceof AbortSignal)return new dA({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if("NotAllowedError"===a.name)return new dA({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});else if("SecurityError"===a.name){let b=window.location.hostname;if(!dD(b))return new dA({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a});if(c.rpId!==b)return new dA({message:`The RP ID "${c.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else if("UnknownError"===a.name)return new dA({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a});return new dA({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}({error:b,options:a})}}}let dG={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},dH={userVerification:"preferred",hints:["security-key"]};function dI(...a){let b=a=>null!==a&&"object"==typeof a&&!Array.isArray(a),c=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),d={};for(let e of a)if(e)for(let a in e){let f=e[a];if(void 0!==f)if(Array.isArray(f))d[a]=f;else if(c(f))d[a]=f;else if(b(f)){let c=d[a];b(c)?d[a]=dI(c,f):d[a]=dI(f)}else d[a]=f}return d}class dJ{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:b,friendlyName:c,signal:d},e){try{var f,g,h,i;let{data:j,error:k}=await this.client.mfa.challenge({factorId:a,webauthn:b});if(!j)return{data:null,error:k};let l=null!=d?d:dC.createNewAbortSignal();if("create"===j.webauthn.type){let{user:a}=j.webauthn.credential_options.publicKey;a.name||(a.name=`${a.id}:${c}`),a.displayName||(a.displayName=a.name)}switch(j.webauthn.type){case"create":{let b=(f=j.webauthn.credential_options.publicKey,g=null==e?void 0:e.create,dI(dG,f,g||{})),{data:c,error:d}=await dE({publicKey:b,signal:l});if(c)return{data:{factorId:a,challengeId:j.id,webauthn:{type:j.webauthn.type,credential_response:c}},error:null};return{data:null,error:d}}case"request":{let b=(h=j.webauthn.credential_options.publicKey,i=null==e?void 0:e.request,dI(dH,h,i||{})),{data:c,error:d}=await dF(Object.assign(Object.assign({},j.webauthn.credential_options),{publicKey:b,signal:l}));if(c)return{data:{factorId:a,challengeId:j.id,webauthn:{type:j.webauthn.type,credential_response:c}},error:null};return{data:null,error:d}}}}catch(a){if(cL(a))return{data:null,error:a};return{data:null,error:new cN("Unexpected error in challenge",a)}}}async _verify({challengeId:a,factorId:b,webauthn:c}){return this.client.mfa.verify({factorId:b,challengeId:a,webauthn:c})}async _authenticate({factorId:a,webauthn:{rpId:b,rpOrigins:c,signal:d}},e){if(!b)return{data:null,error:new cK("rpId is required for WebAuthn authentication")};try{1;return{data:null,error:new cN("Browser does not support WebAuthn",null)}}catch(a){if(cL(a))return{data:null,error:a};return{data:null,error:new cN("Unexpected error in authenticate",a)}}}async _register({friendlyName:a,rpId:b,rpOrigins:c,signal:d},e){if(!b)return{data:null,error:new cK("rpId is required for WebAuthn registration")};try{1;return{data:null,error:new cN("Browser does not support WebAuthn",null)}}catch(a){if(cL(a))return{data:null,error:a};return{data:null,error:new cN("Unexpected error in register",a)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(a){"undefined"!=typeof self&&(self.globalThis=self)}let dK={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cG,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function dL(a,b,c){return await c()}let dM={};class dN{get jwks(){var a,b;return null!=(b=null==(a=dM[this.storageKey])?void 0:a.jwks)?b:{keys:[]}}set jwks(a){dM[this.storageKey]=Object.assign(Object.assign({},dM[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,b;return null!=(b=null==(a=dM[this.storageKey])?void 0:a.cachedAt)?b:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){dM[this.storageKey]=Object.assign(Object.assign({},dM[this.storageKey]),{cachedAt:a})}constructor(a){this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dN.nextInstanceID,dN.nextInstanceID+=1,this.instanceID;const b=Object.assign(Object.assign({},dK),a);this.logDebugMessages=!!b.debug,"function"==typeof b.debug&&(this.logger=b.debug),this.persistSession=b.persistSession,this.storageKey=b.storageKey,this.autoRefreshToken=b.autoRefreshToken,this.admin=new dw({url:b.url,headers:b.headers,fetch:b.fetch}),this.url=b.url,this.headers=b.headers,this.fetch=c3(b.fetch),this.lock=b.lock||dL,this.detectSessionInUrl=b.detectSessionInUrl,this.flowType=b.flowType,this.hasCustomAuthorizationHeader=b.hasCustomAuthorizationHeader,b.lock?this.lock=b.lock:this.lock=dL,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dJ(this)},this.persistSession?(b.storage?this.storage=b.storage:(this.memoryStorage={},this.storage=dx(this.memoryStorage)),b.userStorage&&(this.userStorage=b.userStorage)):(this.memoryStorage={},this.storage=dx(this.memoryStorage)),this.initialize()}_debug(...a){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cF}) ${new Date().toISOString()}`,...a),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{let a=function(a){let b={},c=new URL(a);if(c.hash&&"#"===c.hash[0])try{new URLSearchParams(c.hash.substring(1)).forEach((a,c)=>{b[c]=a})}catch(a){}return c.searchParams.forEach((a,c)=>{b[c]=a}),b}(window.location.href);return this._isImplicitGrantCallback(a)||await this._isPKCECallback(a),await this._recoverAndRefresh(),{error:null}}catch(a){if(cL(a))return{error:a};return{error:new cN("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var b,c,d;try{let{data:e,error:f}=await dm(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(c=null==(b=null==a?void 0:a.options)?void 0:b.data)?c:{},gotrue_meta_security:{captcha_token:null==(d=null==a?void 0:a.options)?void 0:d.captchaToken}},xform:dp});if(f||!e)return{data:{user:null,session:null},error:f};let g=e.session,h=e.user;return e.session&&(await this._saveSession(e.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:h,session:g},error:null}}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(a){var b,c,d;try{let e;if("email"in a){let{email:c,password:d,options:f}=a,g=null,h=null;"pkce"===this.flowType&&([g,h]=await dd(this.storage,this.storageKey)),e=await dm(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==f?void 0:f.emailRedirectTo,body:{email:c,password:d,data:null!=(b=null==f?void 0:f.data)?b:{},gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken},code_challenge:g,code_challenge_method:h},xform:dp})}else if("phone"in a){let{phone:b,password:f,options:g}=a;e=await dm(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:f,data:null!=(c=null==g?void 0:g.data)?c:{},channel:null!=(d=null==g?void 0:g.channel)?d:"sms",gotrue_meta_security:{captcha_token:null==g?void 0:g.captchaToken}},xform:dp})}else throw new cR("You must provide either an email or phone number and a password");let{data:f,error:g}=e;if(g||!f)return{data:{user:null,session:null},error:g};let h=f.session,i=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:i,session:h},error:null}}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(a){try{let b;if("email"in a){let{email:c,password:d,options:e}=a;b=await dm(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:dq})}else if("phone"in a){let{phone:c,password:d,options:e}=a;b=await dm(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:dq})}else throw new cR("You must provide either an email or phone number and a password");let{data:c,error:d}=b;if(d)return{data:{user:null,session:null},error:d};if(!c||!c.session||!c.user)return{data:{user:null,session:null},error:new cQ};return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:d}}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(a){var b,c,d,e;return await this._handleProviderSignIn(a.provider,{redirectTo:null==(b=a.options)?void 0:b.redirectTo,scopes:null==(c=a.options)?void 0:c.scopes,queryParams:null==(d=a.options)?void 0:d.queryParams,skipBrowserRedirect:null==(e=a.options)?void 0:e.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){let{chain:b}=a;switch(b){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw Error(`@supabase/auth-js: Unsupported chain "${b}"`)}}async signInWithEthereum(a){var b,c,d,e,f,g,h,i,j,k,l,m;let n,o;if("message"in a)n=a.message,o=a.signature;else{let{chain:k,wallet:l,statement:p,options:q}=a;if("object"!=typeof l||!(null==q?void 0:q.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");let r=new URL(null!=(b=null==q?void 0:q.url)?b:window.location.href),s=await l.request({method:"eth_requestAccounts"}).then(a=>a).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!s||0===s.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let t=dz(s[0]),u=null==(c=null==q?void 0:q.signInWithEthereum)?void 0:c.chainId;u||(u=parseInt(await l.request({method:"eth_chainId"}),16)),n=function(a){var b;let{chainId:c,domain:d,expirationTime:e,issuedAt:f=new Date,nonce:g,notBefore:h,requestId:i,resources:j,scheme:k,uri:l,version:m}=a;if(!Number.isInteger(c))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${c}`);if(!d)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(g&&g.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${g}`);if(!l)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==m)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(null==(b=a.statement)?void 0:b.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`);let n=dz(a.address),o=k?`${k}://${d}`:d,p=a.statement?`${a.statement}
`:"",q=`${o} wants you to sign in with your Ethereum account:
${n}

${p}`,r=`URI: ${l}
Version: ${m}
Chain ID: ${c}${g?`
Nonce: ${g}`:""}
Issued At: ${f.toISOString()}`;if(e&&(r+=`
Expiration Time: ${e.toISOString()}`),h&&(r+=`
Not Before: ${h.toISOString()}`),i&&(r+=`
Request ID: ${i}`),j){let a="\nResources:";for(let b of j){if(!b||"string"!=typeof b)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);a+=`
- ${b}`}r+=a}return`${q}
${r}`}({domain:r.host,address:t,statement:p,uri:r.href,version:"1",chainId:u,nonce:null==(d=null==q?void 0:q.signInWithEthereum)?void 0:d.nonce,issuedAt:null!=(f=null==(e=null==q?void 0:q.signInWithEthereum)?void 0:e.issuedAt)?f:new Date,expirationTime:null==(g=null==q?void 0:q.signInWithEthereum)?void 0:g.expirationTime,notBefore:null==(h=null==q?void 0:q.signInWithEthereum)?void 0:h.notBefore,requestId:null==(i=null==q?void 0:q.signInWithEthereum)?void 0:i.requestId,resources:null==(j=null==q?void 0:q.signInWithEthereum)?void 0:j.resources}),o=await l.request({method:"personal_sign",params:[(m=n,"0x"+Array.from(new TextEncoder().encode(m),a=>a.toString(16).padStart(2,"0")).join("")),t]})}try{let{data:b,error:c}=await dm(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:n,signature:o},(null==(k=a.options)?void 0:k.captchaToken)?{gotrue_meta_security:{captcha_token:null==(l=a.options)?void 0:l.captchaToken}}:null),xform:dp});if(c)throw c;if(!b||!b.session||!b.user)return{data:{user:null,session:null},error:new cQ};return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:c}}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSolana(a){var b,c,d,e,f,g,h,i,j,k,l,m;let n,o;if("message"in a)n=a.message,o=a.signature;else{let{chain:l,wallet:m,statement:p,options:q}=a;if("object"!=typeof m||!(null==q?void 0:q.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");let r=new URL(null!=(b=null==q?void 0:q.url)?b:window.location.href);if("signIn"in m&&m.signIn){let a,b=await m.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==q?void 0:q.signInWithSolana),{version:"1",domain:r.host,uri:r.href}),p?{statement:p}:null));if(Array.isArray(b)&&b[0]&&"object"==typeof b[0])a=b[0];else if(b&&"object"==typeof b&&"signedMessage"in b&&"signature"in b)a=b;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in a&&"signature"in a&&("string"==typeof a.signedMessage||a.signedMessage instanceof Uint8Array)&&a.signature instanceof Uint8Array)n="string"==typeof a.signedMessage?a.signedMessage:new TextDecoder().decode(a.signedMessage),o=a.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in m)||"function"!=typeof m.signMessage||!("publicKey"in m)||"object"!=typeof m||!m.publicKey||!("toBase58"in m.publicKey)||"function"!=typeof m.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");n=[`${r.host} wants you to sign in with your Solana account:`,m.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${r.href}`,`Issued At: ${null!=(d=null==(c=null==q?void 0:q.signInWithSolana)?void 0:c.issuedAt)?d:new Date().toISOString()}`,...(null==(e=null==q?void 0:q.signInWithSolana)?void 0:e.notBefore)?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...(null==(f=null==q?void 0:q.signInWithSolana)?void 0:f.expirationTime)?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...(null==(g=null==q?void 0:q.signInWithSolana)?void 0:g.chainId)?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...(null==(h=null==q?void 0:q.signInWithSolana)?void 0:h.nonce)?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...(null==(i=null==q?void 0:q.signInWithSolana)?void 0:i.requestId)?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...(null==(k=null==(j=null==q?void 0:q.signInWithSolana)?void 0:j.resources)?void 0:k.length)?["Resources",...q.signInWithSolana.resources.map(a=>`- ${a}`)]:[]].join("\n");let a=await m.signMessage(new TextEncoder().encode(n),"utf8");if(!a||!(a instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");o=a}}try{let{data:b,error:c}=await dm(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:n,signature:c2(o)},(null==(l=a.options)?void 0:l.captchaToken)?{gotrue_meta_security:{captcha_token:null==(m=a.options)?void 0:m.captchaToken}}:null),xform:dp});if(c)throw c;if(!b||!b.session||!b.user)return{data:{user:null,session:null},error:new cQ};return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:c}}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async _exchangeCodeForSession(a){let b=await c5(this.storage,`${this.storageKey}-code-verifier`),[c,d]=(null!=b?b:"").split("/");try{let{data:b,error:e}=await dm(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:c},xform:dp});if(await c6(this.storage,`${this.storageKey}-code-verifier`),e)throw e;if(!b||!b.session||!b.user)return{data:{user:null,session:null,redirectType:null},error:new cQ};return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign(Object.assign({},b),{redirectType:null!=d?d:null}),error:e}}catch(a){if(cL(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(a){try{let{options:b,provider:c,token:d,access_token:e,nonce:f}=a,{data:g,error:h}=await dm(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:d,access_token:e,nonce:f,gotrue_meta_security:{captcha_token:null==b?void 0:b.captchaToken}},xform:dp});if(h)return{data:{user:null,session:null},error:h};if(!g||!g.session||!g.user)return{data:{user:null,session:null},error:new cQ};return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:h}}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(a){var b,c,d,e,f;try{if("email"in a){let{email:d,options:e}=a,f=null,g=null;"pkce"===this.flowType&&([f,g]=await dd(this.storage,this.storageKey));let{error:h}=await dm(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:null!=(b=null==e?void 0:e.data)?b:{},create_user:null==(c=null==e?void 0:e.shouldCreateUser)||c,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:null==e?void 0:e.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in a){let{phone:b,options:c}=a,{data:g,error:h}=await dm(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:null!=(d=null==c?void 0:c.data)?d:{},create_user:null==(e=null==c?void 0:c.shouldCreateUser)||e,gotrue_meta_security:{captcha_token:null==c?void 0:c.captchaToken},channel:null!=(f=null==c?void 0:c.channel)?f:"sms"}});return{data:{user:null,session:null,messageId:null==g?void 0:g.message_id},error:h}}throw new cR("You must provide either an email or phone number.")}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(a){var b,c;try{let d,e;"options"in a&&(d=null==(b=a.options)?void 0:b.redirectTo,e=null==(c=a.options)?void 0:c.captchaToken);let{data:f,error:g}=await dm(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:e}}),redirectTo:d,xform:dp});if(g)throw g;if(!f)throw Error("An error occurred on token verification.");let h=f.session,i=f.user;return(null==h?void 0:h.access_token)&&(await this._saveSession(h),await this._notifyAllSubscribers("recovery"==a.type?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:i,session:h},error:null}}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(a){var b,c,d;try{let e=null,f=null;return"pkce"===this.flowType&&([e,f]=await dd(this.storage,this.storageKey)),await dm(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:null!=(c=null==(b=a.options)?void 0:b.redirectTo)?c:void 0}),(null==(d=null==a?void 0:a.options)?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:e,code_challenge_method:f}),headers:this.headers,xform:ds})}catch(a){if(cL(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{let{data:{session:b},error:c}=a;if(c)throw c;if(!b)throw new cP;let{error:d}=await dm(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:b.access_token});return{data:{user:null,session:null},error:d}})}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async resend(a){try{let b=`${this.url}/resend`;if("email"in a){let{email:c,type:d,options:e}=a,{error:f}=await dm(this.fetch,"POST",b,{headers:this.headers,body:{email:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},redirectTo:null==e?void 0:e.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in a){let{phone:c,type:d,options:e}=a,{data:f,error:g}=await dm(this.fetch,"POST",b,{headers:this.headers,body:{phone:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}}});return{data:{user:null,session:null,messageId:null==f?void 0:f.message_id},error:g}}throw new cR("You must provide either an email or phone number and a type")}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(a,b){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){let a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await a,await b()))();return this.pendingInLock.push((async()=>{try{await c}catch(a){}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let a=b();for(this.pendingInLock.push((async()=>{try{await a}catch(a){}})()),await a;this.pendingInLock.length;){let a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{let b=await this.__loadSession();return await a(b)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let a=null,b=await c5(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",b),null!==b&&(this._isValidSession(b)?a=b:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};let c=!!a.expires_at&&1e3*a.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",a.expires_at),!c){if(this.userStorage){let b=await c5(this.userStorage,this.storageKey+"-user");(null==b?void 0:b.user)?a.user=b.user:a.user=dh()}if(this.storage.isServer&&a.user){let b=this.suppressGetSessionWarning;a=new Proxy(a,{get:(a,c,d)=>(b||"user"!==c||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),b=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,c,d))})}return{data:{session:a},error:null}}let{data:d,error:e}=await this._callRefreshToken(a.refresh_token);if(e)return{data:{session:null},error:e};return{data:{session:d},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{if(a)return await dm(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:dr});return await this._useSession(async a=>{var b,c,d;let{data:e,error:f}=a;if(f)throw f;return(null==(b=e.session)?void 0:b.access_token)||this.hasCustomAuthorizationHeader?await dm(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0,xform:dr}):{data:{user:null},error:new cP}})}catch(a){if(cL(a))return cL(a)&&"AuthSessionMissingError"===a.name&&(await this._removeSession(),await c6(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(a,b={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,b))}async _updateUser(a,b={}){try{return await this._useSession(async c=>{let{data:d,error:e}=c;if(e)throw e;if(!d.session)throw new cP;let f=d.session,g=null,h=null;"pkce"===this.flowType&&null!=a.email&&([g,h]=await dd(this.storage,this.storageKey));let{data:i,error:j}=await dm(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==b?void 0:b.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:h}),jwt:f.access_token,xform:dr});if(j)throw j;return f.user=i.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(a){if(cL(a))return{data:{user:null},error:a};throw a}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new cP;let b=Date.now()/1e3,c=b,d=!0,e=null,{payload:f}=c8(a.access_token);if(f.exp&&(d=(c=f.exp)<=b),d){let{data:b,error:c}=await this._callRefreshToken(a.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!b)return{data:{user:null,session:null},error:null};e=b}else{let{data:d,error:f}=await this._getUser(a.access_token);if(f)throw f;e={access_token:a.access_token,refresh_token:a.refresh_token,user:d.user,token_type:"bearer",expires_in:c-b,expires_at:c},await this._saveSession(e),await this._notifyAllSubscribers("SIGNED_IN",e)}return{data:{user:e.user,session:e},error:null}}catch(a){if(cL(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async b=>{var c;if(!a){let{data:d,error:e}=b;if(e)throw e;a=null!=(c=d.session)?c:void 0}if(!(null==a?void 0:a.refresh_token))throw new cP;let{data:d,error:e}=await this._callRefreshToken(a.refresh_token);return e?{data:{user:null,session:null},error:e}:d?{data:{user:d.user,session:d},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(a,b){try{throw new cS("No browser detected.")}catch(a){if(cL(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){let b=await c5(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&b)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return{error:e};let f=null==(c=d.session)?void 0:c.access_token;if(f){let{error:b}=await this.admin.signOut(f,a);if(b&&!(cL(b)&&"AuthApiError"===b.name&&(404===b.status||401===b.status||403===b.status)))return{error:b}}return"others"!==a&&(await this._removeSession(),await c6(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(a){let b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){let b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)}),c={id:b,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",b),this.stateChangeEmitters.delete(b)}};return this._debug("#onAuthStateChange()","registered callback with id",b),this.stateChangeEmitters.set(b,c),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(b)})})(),{data:{subscription:c}}}async _emitInitialSession(a){return await this._useSession(async b=>{var c,d;try{let{data:{session:d},error:e}=b;if(e)throw e;await (null==(c=this.stateChangeEmitters.get(a))?void 0:c.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(b){await (null==(d=this.stateChangeEmitters.get(a))?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",b),console.error(b)}})}async resetPasswordForEmail(a,b={}){let c=null,d=null;"pkce"===this.flowType&&([c,d]=await dd(this.storage,this.storageKey,!0));try{return await dm(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:c,code_challenge_method:d,gotrue_meta_security:{captcha_token:b.captchaToken}},headers:this.headers,redirectTo:b.redirectTo})}catch(a){if(cL(a))return{data:null,error:a};throw a}}async getUserIdentities(){var a;try{let{data:b,error:c}=await this.getUser();if(c)throw c;return{data:{identities:null!=(a=b.user.identities)?a:[]},error:null}}catch(a){if(cL(a))return{data:null,error:a};throw a}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){try{let{data:b,error:c}=await this._useSession(async b=>{var c,d,e,f,g;let{data:h,error:i}=b;if(i)throw i;let j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:null==(c=a.options)?void 0:c.redirectTo,scopes:null==(d=a.options)?void 0:d.scopes,queryParams:null==(e=a.options)?void 0:e.queryParams,skipBrowserRedirect:!0});return await dm(this.fetch,"GET",j,{headers:this.headers,jwt:null!=(g=null==(f=h.session)?void 0:f.access_token)?g:void 0})});if(c)throw c;return{data:{provider:a.provider,url:null==b?void 0:b.url},error:null}}catch(b){if(cL(b))return{data:{provider:a.provider,url:null},error:b};throw b}}async linkIdentityIdToken(a){return await this._useSession(async b=>{var c;try{let{error:d,data:{session:e}}=b;if(d)throw d;let{options:f,provider:g,token:h,access_token:i,nonce:j}=a,{data:k,error:l}=await dm(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(c=null==e?void 0:e.access_token)?c:void 0,body:{provider:g,id_token:h,access_token:i,nonce:j,link_identity:!0,gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken}},xform:dp});if(l)return{data:{user:null,session:null},error:l};if(!k||!k.session||!k.user)return{data:{user:null,session:null},error:new cQ};return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),{data:k,error:l}}catch(a){if(cL(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)throw f;return await dm(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0})})}catch(a){if(cL(a))return{data:null,error:a};throw a}}async _refreshAccessToken(a){let b=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(b,"begin");try{var c,d;let e=Date.now();return await (c=async c=>(c>0&&await c9(200*Math.pow(2,c-1)),this._debug(b,"refreshing attempt",c),await dm(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:dp})),d=(a,b)=>{let c=200*Math.pow(2,a);return b&&cU(b)&&Date.now()+c-e<3e4},new Promise((a,b)=>{(async()=>{for(let e=0;e<1/0;e++)try{let b=await c(e);if(!d(e,null,b))return void a(b)}catch(a){if(!d(e,a))return void b(a)}})()}))}catch(a){if(this._debug(b,"error",a),cL(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(b,"end")}}_isValidSession(a){return"object"==typeof a&&null!==a&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,b){let c=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:b.redirectTo,scopes:b.scopes,queryParams:b.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",b,"url",c),{data:{provider:a,url:c},error:null}}async _recoverAndRefresh(){var a,b;let c="#_recoverAndRefresh()";this._debug(c,"begin");try{let d=await c5(this.storage,this.storageKey);if(d&&this.userStorage){let b=await c5(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:d.user},await c4(this.userStorage,this.storageKey+"-user",b)),d.user=null!=(a=null==b?void 0:b.user)?a:dh()}else if(d&&!d.user&&!d.user){let a=await c5(this.storage,this.storageKey+"-user");a&&(null==a?void 0:a.user)?(d.user=a.user,await c6(this.storage,this.storageKey+"-user"),await c4(this.storage,this.storageKey,d)):d.user=dh()}if(this._debug(c,"session from storage",d),!this._isValidSession(d)){this._debug(c,"session is not valid"),null!==d&&await this._removeSession();return}let e=(null!=(b=d.expires_at)?b:1/0)*1e3-Date.now()<9e4;if(this._debug(c,`session has${e?"":" not"} expired with margin of 90000s`),e){if(this.autoRefreshToken&&d.refresh_token){let{error:a}=await this._callRefreshToken(d.refresh_token);a&&(console.error(a),cU(a)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(d.user&&!0===d.user.__isUserNotAvailableProxy)try{let{data:a,error:b}=await this._getUser(d.access_token);!b&&(null==a?void 0:a.user)?(d.user=a.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(c,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(a){this._debug(c,"error",a),console.error(a);return}finally{this._debug(c,"end")}}async _callRefreshToken(a){var b,c;if(!a)throw new cP;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let d=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new c7;let{data:b,error:c}=await this._refreshAccessToken(a);if(c)throw c;if(!b.session)throw new cP;await this._saveSession(b.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",b.session);let d={data:b.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(d,"error",a),cL(a)){let c={data:null,error:a};return cU(a)||await this._removeSession(),null==(b=this.refreshingDeferred)||b.resolve(c),c}throw null==(c=this.refreshingDeferred)||c.reject(a),a}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(a,b,c=!0){let d=`#_notifyAllSubscribers(${a})`;this._debug(d,"begin",b,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:a,session:b});let d=[],e=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(a,b)}catch(a){d.push(a)}});if(await Promise.all(e),d.length>0){for(let a=0;a<d.length;a+=1)console.error(d[a]);throw d[0]}}finally{this._debug(d,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;let b=Object.assign({},a),c=b.user&&!0===b.user.__isUserNotAvailableProxy;if(this.userStorage){!c&&b.user&&await c4(this.userStorage,this.storageKey+"-user",{user:b.user});let a=Object.assign({},b);delete a.user;let d=di(a);await c4(this.storage,this.storageKey,d)}else{let a=di(b);await c4(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await c6(this.storage,this.storageKey),await c6(this.storage,this.storageKey+"-code-verifier"),await c6(this.storage,this.storageKey+"-user"),this.userStorage&&await c6(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()"),this.visibilityChangedCallback,this.visibilityChangedCallback=null}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let a=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=a,a&&"object"==typeof a&&"function"==typeof a.unref?a.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let a=Date.now();try{return await this._useSession(async b=>{let{data:{session:c}}=b;if(!c||!c.refresh_token||!c.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let d=Math.floor((1e3*c.expires_at-a)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),d<=3&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof dy)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){return this._debug("#_handleVisibilityChange()"),this.autoRefreshToken&&this.startAutoRefresh(),!1}async _onVisibilityChanged(a){let b=`#_onVisibilityChanged(${a})`;this._debug(b,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(b,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,b,c){let d=[`provider=${encodeURIComponent(b)}`];if((null==c?void 0:c.redirectTo)&&d.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),(null==c?void 0:c.scopes)&&d.push(`scopes=${encodeURIComponent(c.scopes)}`),"pkce"===this.flowType){let[a,b]=await dd(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(b)}`});d.push(c.toString())}if(null==c?void 0:c.queryParams){let a=new URLSearchParams(c.queryParams);d.push(a.toString())}return(null==c?void 0:c.skipBrowserRedirect)&&d.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${a}?${d.join("&")}`}async _unenroll(a){try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;return e?{data:null,error:e}:await dm(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token})})}catch(a){if(cL(a))return{data:null,error:a};throw a}}async _enroll(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)return{data:null,error:f};let g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},"phone"===a.factorType?{phone:a.phone}:"totp"===a.factorType?{issuer:a.issuer}:{}),{data:h,error:i}=await dm(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:null==(c=null==e?void 0:e.session)?void 0:c.access_token});return i?{data:null,error:i}:("totp"===a.factorType&&"totp"===h.type&&(null==(d=null==h?void 0:h.totp)?void 0:d.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(a){if(cL(a))return{data:null,error:a};throw a}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c,d,e;let{data:f,error:g}=b;if(g)return{data:null,error:g};let h=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:"create"===a.webauthn.type?(d=a.webauthn.credential_response,"toJSON"in d&&"function"==typeof d.toJSON?d.toJSON():{id:d.id,rawId:d.id,response:{attestationObject:c2(new Uint8Array(d.response.attestationObject)),clientDataJSON:c2(new Uint8Array(d.response.clientDataJSON))},type:"public-key",clientExtensionResults:d.getClientExtensionResults(),authenticatorAttachment:null!=(e=d.authenticatorAttachment)?e:void 0}):function(a){var b;if("toJSON"in a&&"function"==typeof a.toJSON)return a.toJSON();let c=a.getClientExtensionResults(),d=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:c2(new Uint8Array(d.authenticatorData)),clientDataJSON:c2(new Uint8Array(d.clientDataJSON)),signature:c2(new Uint8Array(d.signature)),userHandle:d.userHandle?c2(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:null!=(b=a.authenticatorAttachment)?b:void 0}}(a.webauthn.credential_response)})}:{code:a.code}),{data:i,error:j}=await dm(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:h,headers:this.headers,jwt:null==(c=null==f?void 0:f.session)?void 0:c.access_token});return j?{data:null,error:j}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:j})})}catch(a){if(cL(a))return{data:null,error:a};throw a}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return{data:null,error:e};let f=await dm(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token});if(f.error)return f;let{data:g}=f;if("webauthn"!==g.type)return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:function(a){if(!a)throw Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(a);let{challenge:b,user:c,excludeCredentials:d}=a,e=(0,bv.__rest)(a,["challenge","user","excludeCredentials"]),f=c1(b).buffer,g=Object.assign(Object.assign({},c),{id:c1(c.id).buffer}),h=Object.assign(Object.assign({},e),{challenge:f,user:g});if(d&&d.length>0){h.excludeCredentials=Array(d.length);for(let a=0;a<d.length;a++){let b=d[a];h.excludeCredentials[a]=Object.assign(Object.assign({},b),{id:c1(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return h}(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:function(a){if(!a)throw Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(a);let{challenge:b,allowCredentials:c}=a,d=(0,bv.__rest)(a,["challenge","allowCredentials"]),e=c1(b).buffer,f=Object.assign(Object.assign({},d),{challenge:e});if(c&&c.length>0){f.allowCredentials=Array(c.length);for(let a=0;a<c.length;a++){let b=c[a];f.allowCredentials[a]=Object.assign(Object.assign({},b),{id:c1(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return f}(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(cL(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(a){let{data:b,error:c}=await this._challenge({factorId:a.factorId});return c?{data:null,error:c}:await this._verify({factorId:a.factorId,challengeId:b.id,code:a.code})}async _listFactors(){var a;let{data:{user:b},error:c}=await this.getUser();if(c)return{data:null,error:c};let d={all:[],phone:[],totp:[],webauthn:[]};for(let c of null!=(a=null==b?void 0:b.factors)?a:[])d.all.push(c),"verified"===c.status&&d[c.factor_type].push(c);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async a=>{var b,c;let{data:{session:d},error:e}=a;if(e)return{data:null,error:e};if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:f}=c8(d.access_token),g=null;f.aal&&(g=f.aal);let h=g;return(null!=(c=null==(b=d.user.factors)?void 0:b.filter(a=>"verified"===a.status))?c:[]).length>0&&(h="aal2"),{data:{currentLevel:g,nextLevel:h,currentAuthenticationMethods:f.amr||[]},error:null}}))}async fetchJwk(a,b={keys:[]}){let c=b.keys.find(b=>b.kid===a);if(c)return c;let d=Date.now();if((c=this.jwks.keys.find(b=>b.kid===a))&&this.jwks_cached_at+6e5>d)return c;let{data:e,error:f}=await dm(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return e.keys&&0!==e.keys.length&&(this.jwks=e,this.jwks_cached_at=d,c=e.keys.find(b=>b.kid===a))?c:null}async getClaims(a,b={}){try{var c;let d,e=a;if(!e){let{data:a,error:b}=await this.getSession();if(b||!a.session)return{data:null,error:b};e=a.session.access_token}let{header:f,payload:g,signature:h,raw:{header:i,payload:j}}=c8(e);(null==b?void 0:b.allowExpired)||function(a){if(!a)throw Error("Missing exp claim");if(a<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(g.exp);let k=!f.alg||f.alg.startsWith("HS")||!f.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(f.kid,(null==b?void 0:b.keys)?{keys:b.keys}:null==b?void 0:b.jwks);if(!k){let{error:a}=await this.getUser(e);if(a)throw a;return{data:{claims:g,header:f,signature:h},error:null}}let l=function(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(f.alg),m=await crypto.subtle.importKey("jwk",k,l,!0,["verify"]);if(!await crypto.subtle.verify(l,m,h,(c=`${i}.${j}`,d=[],!function(a,b){for(let c=0;c<a.length;c+=1){let d=a.charCodeAt(c);if(d>55295&&d<=56319){let b=(d-55296)*1024&65535;d=(a.charCodeAt(c+1)-56320&65535|b)+65536,c+=1}!function(a,b){if(a<=127)return b(a);if(a<=2047){b(192|a>>6),b(128|63&a);return}if(a<=65535){b(224|a>>12),b(128|a>>6&63),b(128|63&a);return}if(a<=1114111){b(240|a>>18),b(128|a>>12&63),b(128|a>>6&63),b(128|63&a);return}throw Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}(d,b)}}(c,a=>d.push(a)),new Uint8Array(d))))throw new cW("Invalid JWT signature");return{data:{claims:g,header:f,signature:h},error:null}}catch(a){if(cL(a))return{data:null,error:a};throw a}}}dN.nextInstanceID=0;let dO=dN;class dP extends dO{constructor(a){super(a)}}class dQ{constructor(a,b,c){var d,e,f;this.supabaseUrl=a,this.supabaseKey=b;const g=function(a){let b=null==a?void 0:a.trim();if(!b)throw Error("supabaseUrl is required.");if(!b.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(b.endsWith("/")?b:b+"/")}catch(a){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(a);if(!b)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const h=`sb-${g.hostname.split(".")[0]}-auth-token`,i=function(a,b){var c,d;let{db:e,auth:f,realtime:g,global:h}=a,{db:i,auth:j,realtime:k,global:l}=b,m={db:Object.assign(Object.assign({},i),e),auth:Object.assign(Object.assign({},j),f),realtime:Object.assign(Object.assign({},k),g),storage:{},global:Object.assign(Object.assign(Object.assign({},l),h),{headers:Object.assign(Object.assign({},null!=(c=null==l?void 0:l.headers)?c:{}),null!=(d=null==h?void 0:h.headers)?d:{})}),accessToken:async()=>""};return a.accessToken?m.accessToken=a.accessToken:delete m.accessToken,m}(null!=c?c:{},{db:cB,realtime:cD,auth:Object.assign(Object.assign({},cC),{storageKey:h}),global:cA});this.storageKey=null!=(d=i.auth.storageKey)?d:"",this.headers=null!=(e=i.global.headers)?e:{},i.accessToken?(this.accessToken=i.accessToken,this.auth=new Proxy({},{get:(a,b)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(f=i.auth)?f:{},this.headers,i.global.fetch),this.fetch=((a,b,c)=>{let d,e=(d=c||("undefined"==typeof fetch?cE.default:fetch),(...a)=>d(...a)),f="undefined"==typeof Headers?cE.Headers:Headers;return async(c,d)=>{var g;let h=null!=(g=await b())?g:a,i=new f(null==d?void 0:d.headers);return i.has("apikey")||i.set("apikey",a),i.has("Authorization")||i.set("Authorization",`Bearer ${h}`),e(c,Object.assign(Object.assign({},d),{headers:i}))}})(b,this._getAccessToken.bind(this),i.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},i.realtime)),this.rest=new bB(new URL("rest/v1",g).href,{headers:this.headers,schema:i.db.schema,fetch:this.fetch}),this.storage=new cy(this.storageUrl.href,this.headers,this.fetch,null==c?void 0:c.storage),i.accessToken||this._listenForAuthEvents()}get functions(){return new bA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,b={},c={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,b,c)}channel(a,b={config:{}}){return this.realtime.channel(a,b)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a,b;if(this.accessToken)return await this.accessToken();let{data:c}=await this.auth.getSession();return null!=(b=null==(a=c.session)?void 0:a.access_token)?b:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,userStorage:e,storageKey:f,flowType:g,lock:h,debug:i},j,k){let l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dP({url:this.authUrl.href,headers:Object.assign(Object.assign({},l),j),storageKey:f,autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,userStorage:e,flowType:g,lock:h,debug:i,fetch:k,hasCustomAuthorizationHeader:Object.keys(this.headers).some(a=>"authorization"===a.toLowerCase())})}_initRealtimeClient(a){return new b$(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},null==a?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,b)=>{this._handleTokenChanged(a,"CLIENT",null==b?void 0:b.access_token)})}_handleTokenChanged(a,b,c){("TOKEN_REFRESHED"===a||"SIGNED_IN"===a)&&this.changedAccessToken!==c?(this.changedAccessToken=c,this.realtime.setAuth(c)):"SIGNED_OUT"===a&&(this.realtime.setAuth(),"STORAGE"==b&&this.auth.signOut(),this.changedAccessToken=void 0)}}(function(){if("undefined"==typeof process)return!1;let a=process.version;if(null==a)return!1;let b=a.match(/^v(\d+)\./);return!!b&&18>=parseInt(b[1],10)})()&&console.warn(`⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217`);var dR=a.i(13684);dR.parse,dR.serialize;let dS={path:"/",sameSite:"lax",httpOnly:!1,maxAge:3456e4},dT=/^(.*)[.](0|[1-9][0-9]*)$/;function dU(a,b){if(a===b)return!0;let c=a.match(dT);return!!c&&c[1]===b}function dV(a,b,c){let d=c??3180,e=encodeURIComponent(b);if(e.length<=d)return[{name:a,value:b}];let f=[];for(;e.length>0;){let a=e.slice(0,d),b=a.lastIndexOf("%");b>d-3&&(a=a.slice(0,b));let c="";for(;a.length>0;)try{c=decodeURIComponent(a);break}catch(b){if(b instanceof URIError&&"%"===a.at(-3)&&a.length>3)a=a.slice(0,a.length-3);else throw b}f.push(c),e=e.slice(a.length)}return f.map((b,c)=>({name:`${a}.${c}`,value:b}))}async function dW(a,b){let c=await b(a);if(c)return c;let d=[];for(let c=0;;c++){let e=`${a}.${c}`,f=await b(e);if(!f)break;d.push(f)}return d.length>0?d.join(""):null}let dX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dY=" 	\n\r=".split(""),dZ=(()=>{let a=Array(128);for(let b=0;b<a.length;b+=1)a[b]=-1;for(let b=0;b<dY.length;b+=1)a[dY[b].charCodeAt(0)]=-2;for(let b=0;b<dX.length;b+=1)a[dX[b].charCodeAt(0)]=b;return a})();function d$(a){let b=[],c=0,d=0;if(function(a,b){for(let c=0;c<a.length;c+=1){let d=a.charCodeAt(c);if(d>55295&&d<=56319){let b=(d-55296)*1024&65535;d=(a.charCodeAt(c+1)-56320&65535|b)+65536,c+=1}!function(a,b){if(a<=127)return b(a);if(a<=2047){b(192|a>>6),b(128|63&a);return}if(a<=65535){b(224|a>>12),b(128|a>>6&63),b(128|63&a);return}if(a<=1114111){b(240|a>>18),b(128|a>>12&63),b(128|a>>6&63),b(128|63&a);return}throw Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}(d,b)}}(a,a=>{for(c=c<<8|a,d+=8;d>=6;){let a=c>>d-6&63;b.push(dX[a]),d-=6}}),d>0)for(c<<=6-d,d=6;d>=6;){let a=c>>d-6&63;b.push(dX[a]),d-=6}return b.join("")}function d_(a){let b=[],c=a=>{b.push(String.fromCodePoint(a))},d={utf8seq:0,codepoint:0},e=0,f=0;for(let b=0;b<a.length;b+=1){let g=dZ[a.charCodeAt(b)];if(g>-1)for(e=e<<6|g,f+=6;f>=8;)(function(a,b,c){if(0===b.utf8seq){if(a<=127)return c(a);for(let c=1;c<6;c+=1)if((a>>7-c&1)==0){b.utf8seq=c;break}if(2===b.utf8seq)b.codepoint=31&a;else if(3===b.utf8seq)b.codepoint=15&a;else if(4===b.utf8seq)b.codepoint=7&a;else throw Error("Invalid UTF-8 sequence");b.utf8seq-=1}else if(b.utf8seq>0){if(a<=127)throw Error("Invalid UTF-8 sequence");b.codepoint=b.codepoint<<6|63&a,b.utf8seq-=1,0===b.utf8seq&&c(b.codepoint)}})(e>>f-8&255,d,c),f-=8;else if(-2===g)continue;else throw Error(`Invalid Base64-URL character "${a.at(b)}" at position ${b}`)}return b.join("")}let d0="base64-";async function d1({getAll:a,setAll:b,setItems:c,removedItems:d},e){let f=e.cookieEncoding,g=e.cookieOptions??null,h=await a([...c?Object.keys(c):[],...d?Object.keys(d):[]]),i=h?.map(({name:a})=>a)||[],j=Object.keys(d).flatMap(a=>i.filter(b=>dU(b,a))),k=Object.keys(c).flatMap(a=>{let b=new Set(i.filter(b=>dU(b,a))),d=c[a];"base64url"===f&&(d=d0+d$(d));let e=dV(a,d);return e.forEach(a=>{b.delete(a.name)}),j.push(...b),e}),l={...dS,...g,maxAge:0},m={...dS,...g,maxAge:dS.maxAge};delete l.name,delete m.name,await b([...j.map(a=>({name:a,value:"",options:l})),...k.map(({name:a,value:b})=>({name:a,value:b,options:m}))])}a.i(43999);let d2=function(a,b,c){0;if(!a||!b)throw Error(`@supabase/ssr: Your project's URL and API key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let{storage:d}=function(a,b){let c,d,e=a.cookies??null,f=a.cookieEncoding,g={},h={};if(e)if("get"in e){let a=async a=>{let b=a.flatMap(a=>[a,...Array.from({length:5}).map((b,c)=>`${a}.${c}`)]),c=[];for(let a=0;a<b.length;a+=1){let d=await e.get(b[a]);(d||"string"==typeof d)&&c.push({name:b[a],value:d})}return c};if(c=async b=>await a(b),"set"in e&&"remove"in e)d=async a=>{for(let b=0;b<a.length;b+=1){let{name:c,value:d,options:f}=a[b];d?await e.set(c,d,f):await e.remove(c,f)}};else if(b)d=async()=>{console.warn("@supabase/ssr: createServerClient was configured without set and remove cookie methods, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness. Consider switching to the getAll and setAll cookie methods instead of get, set and remove which are deprecated and can be difficult to use correctly.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring a getAll and setAll cookie method (deprecated: alternatively both get, set and remove can be used)")}else if("getAll"in e)if(c=async()=>await e.getAll(),"setAll"in e)d=e.setAll;else if(b)d=async()=>{console.warn("@supabase/ssr: createServerClient was configured without the setAll cookie method, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring both getAll and setAll cookie methods (deprecated: alternatively both get, set and remove can be used)");else throw Error(`@supabase/ssr: ${b?"createServerClient":"createBrowserClient"} requires configuring getAll and setAll cookie methods (deprecated: alternatively use get, set and remove).`);else if(b||1)if(b)throw Error("@supabase/ssr: createServerClient must be initialized with cookie options that specify getAll and setAll functions (deprecated, not recommended: alternatively use get, set and remove)");else c=()=>[],d=()=>{throw Error("@supabase/ssr: createBrowserClient in non-browser runtimes (including Next.js pre-rendering mode) was not initialized cookie options that specify getAll and setAll functions (deprecated: alternatively use get, set and remove), but they were needed")};else c=()=>{let a;return Object.keys(a=(0,dR.parse)(document.cookie)).map(b=>({name:b,value:a[b]??""}))},d=a=>{a.forEach(({name:a,value:b,options:c})=>{document.cookie=(0,dR.serialize)(a,b,c)})};return b?{getAll:c,setAll:d,setItems:g,removedItems:h,storage:{isServer:!0,getItem:async a=>{if("string"==typeof g[a])return g[a];if(h[a])return null;let b=await c([a]),d=await dW(a,async a=>{let c=b?.find(({name:b})=>b===a)||null;return c?c.value:null});if(!d)return null;let e=d;return"string"==typeof d&&d.startsWith(d0)&&(e=d_(d.substring(d0.length))),e},setItem:async(b,e)=>{b.endsWith("-code-verifier")&&await d1({getAll:c,setAll:d,setItems:{[b]:e},removedItems:{}},{cookieOptions:a?.cookieOptions??null,cookieEncoding:f}),g[b]=e,delete h[b]},removeItem:async a=>{delete g[a],h[a]=!0}}}:{getAll:c,setAll:d,setItems:g,removedItems:h,storage:{isServer:!1,getItem:async a=>{let b=await c([a]),d=await dW(a,async a=>{let c=b?.find(({name:b})=>b===a)||null;return c?c.value:null});if(!d)return null;let e=d;return d.startsWith(d0)&&(e=d_(d.substring(d0.length))),e},setItem:async(b,e)=>{let g=await c([b]),h=new Set((g?.map(({name:a})=>a)||[]).filter(a=>dU(a,b))),i=e;"base64url"===f&&(i=d0+d$(e));let j=dV(b,i);j.forEach(({name:a})=>{h.delete(a)});let k={...dS,...a?.cookieOptions,maxAge:0},l={...dS,...a?.cookieOptions,maxAge:dS.maxAge};delete k.name,delete l.name;let m=[...[...h].map(a=>({name:a,value:"",options:k})),...j.map(({name:a,value:b})=>({name:a,value:b,options:l}))];m.length>0&&await d(m)},removeItem:async b=>{let e=await c([b]),f=(e?.map(({name:a})=>a)||[]).filter(a=>dU(a,b)),g={...dS,...a?.cookieOptions,maxAge:0};delete g.name,f.length>0&&await d(f.map(a=>({name:a,value:"",options:g})))}}}}({...void 0,cookieEncoding:(void 0)??"base64url"},!1),e=new dQ(a,b,{...void 0,global:{...void 0,headers:{...void 0,"X-Client-Info":"supabase-ssr/0.7.0 createBrowserClient"}},auth:{...void 0,flowType:"pkce",autoRefreshToken:!1,detectSessionInUrl:!1,persistSession:!0,storage:d}});return e}("https://gneanaaeneplaifkrokq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImduZWFuYWFlbmVwbGFpZmtyb2txIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEwNjg2MzksImV4cCI6MjA3NjY0NDYzOX0.IVB4wkT7k0xJfYLBW3qRX6exjIDAQTKED0VVSPIwR9s");a.s(["default",0,()=>{let{toast:a}=(0,O.useToast)(),[b,c]=(0,B.useState)({name:"",email:"",phone:"",company:"",service:"Not Sure Yet",message:""}),[d,e]=(0,B.useState)(!1),[f,g]=(0,B.useState)(!1),[h,i]=(0,B.useState)(""),[j,k]=(0,B.useState)(""),[l,m]=(0,B.useState)(!1),[n,o]=(0,B.useState)(0),p=(0,C.useSearchParams)();(0,B.useEffect)(()=>{let a=p.get("service"),b=p.get("message");a&&c(b=>({...b,service:a})),b&&c(a=>({...a,message:b}))},[p]),(0,B.useEffect)(()=>{let a=sessionStorage.getItem("call_cooldown_end");if(a){let b=Math.floor((parseInt(a)-Date.now())/1e3);b>0?o(b):sessionStorage.removeItem("call_cooldown_end")}},[]),(0,B.useEffect)(()=>{if(n>0){let a=setInterval(()=>{o(a=>a<=1?(sessionStorage.removeItem("call_cooldown_end"),0):a-1)},1e3);return()=>clearInterval(a)}},[n]);let q=async d=>{d.preventDefault(),e(!0);let f=new FormData;f.append("entry.208529617",b.name),f.append("entry.829404065",b.email),f.append("entry.408120186",b.phone),f.append("entry.2034433684",b.company),f.append("entry.1377611517",b.service),f.append("entry.1045858748",b.message);try{await fetch("https://docs.google.com/forms/d/e/1FAIpQLSdi1qPJF9-nvmFTuFcfEtQc3OslW54WuzDj4EQjXZTTzrqfEw/formResponse",{method:"POST",body:f,mode:"no-cors"}),a({title:"Message Sent!",description:"We'll get back to you within 24 hours."}),c({name:"",email:"",phone:"",company:"",service:"",message:""})}catch(b){console.error("Form submission error:",b),a({title:"Error",description:"Something went wrong. Please try again later.",variant:"destructive"})}finally{e(!1)}},r=a=>{c({...b,[a.target.name]:a.target.value})},s=async b=>{b.preventDefault(),m(!0);try{let{data:b,error:c}=await d2.functions.invoke("schedule-call",{body:{name:j,phone:h}});if(c)throw c;a({title:"Call Scheduled!",description:"We'll call you within 5 minutes."});let d=Date.now()+3e5;sessionStorage.setItem("call_cooldown_end",d.toString()),o(300),k(""),i(""),g(!1)}catch(b){console.error("Error scheduling call:",b),a({title:"Error",description:"Failed to schedule call. Please try again.",variant:"destructive"})}finally{m(!1)}};return(0,A.jsxs)("div",{className:"min-h-screen",children:[(0,A.jsx)("section",{className:"pt-32 pb-20 gradient-primary",children:(0,A.jsxs)("div",{className:"container mx-auto px-4 text-center text-white",children:[(0,A.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-6 animate-fade-in",children:"Let's Start Automating Your Business"}),(0,A.jsx)("p",{className:"text-lg md:text-xl max-w-3xl mx-auto text-white/90 animate-fade-in",children:"Book a free strategy call or send us a message. We'll help you find the perfect AI solution."})]})}),(0,A.jsx)("section",{className:"py-20 bg-background",children:(0,A.jsx)("div",{className:"container mx-auto px-4",children:(0,A.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,A.jsxs)("div",{className:"animate-fade-in",children:[(0,A.jsxs)("div",{className:"bg-card border border-border rounded-2xl p-8",children:[(0,A.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Send us a message"}),(0,A.jsxs)("form",{onSubmit:q,className:"space-y-6",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(N.Label,{htmlFor:"name",children:"Name *"}),(0,A.jsx)(L.Input,{id:"name",name:"name",value:b.name,onChange:r,required:!0,placeholder:"Your full name",className:"mt-2"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(N.Label,{htmlFor:"email",children:"Email *"}),(0,A.jsx)(L.Input,{id:"email",name:"email",type:"email",value:b.email,onChange:r,required:!0,placeholder:"your@email.com",className:"mt-2"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(N.Label,{htmlFor:"phone",children:"Phone "}),(0,A.jsx)(L.Input,{id:"phone",name:"phone",type:"tel",value:b.phone,onChange:r,placeholder:"+1 (555) 123-4567",className:"mt-2"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(N.Label,{htmlFor:"company",children:"Company"}),(0,A.jsx)(L.Input,{id:"company",name:"company",value:b.company,onChange:r,placeholder:"Your company name",className:"mt-2"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(N.Label,{htmlFor:"service",children:"What service are you interested in? *"}),(0,A.jsxs)(av,{value:b.service,onValueChange:a=>c({...b,service:a}),required:!0,children:[(0,A.jsx)(bd,{className:"mt-2",children:(0,A.jsx)(az,{placeholder:"Select a service"})}),(0,A.jsxs)(bg,{children:[(0,A.jsx)(bh,{value:"AI Voice Agents",children:"AI Voice Agents"}),(0,A.jsx)(bh,{value:"Inbound Call Automation",children:"Inbound Call Automation"}),(0,A.jsx)(bh,{value:"Appointment Scheduling Voice Bots",children:"Appointment Scheduling Voice Bots"}),(0,A.jsx)(bh,{value:"Sales Voice Agents",children:"Sales Voice Agents"}),(0,A.jsx)(bh,{value:"Custom Solution",children:"Custom Solution"}),(0,A.jsx)(bh,{value:"Not Sure Yet",children:"Not Sure Yet"})]})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(N.Label,{htmlFor:"message",children:"Message"}),(0,A.jsx)(M.Textarea,{id:"message",name:"message",value:b.message,onChange:r,placeholder:"Tell us about your needs...",className:"mt-2 min-h-[120px]"})]}),(0,A.jsx)(K.Button,{type:"submit",variant:"hero",size:"lg",className:"w-full",disabled:d,children:d?"Sending...":(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(H,{size:20,className:"mr-2"}),"Send Message"]})})]})]}),(0,A.jsx)("div",{className:"mt-8 p-4 sm:p-6 bg-gradient-to-r from-primary/10 to-secondary/10 rounded-xl border border-primary/20",children:(0,A.jsxs)(bo,{open:f,onOpenChange:g,children:[(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(I.PhoneCall,{className:"text-primary flex-shrink-0",size:24}),(0,A.jsx)("p",{className:"font-semibold text-sm sm:text-base",children:"Get a Call from Our AI Agent"})]}),(0,A.jsx)(bq,{asChild:!0,children:(0,A.jsx)(K.Button,{variant:"ghost",size:"sm",disabled:n>0,children:(0,A.jsx)(J,{className:`h-4 w-4 transition-transform ${f?"rotate-180":""}`})})})]}),n>0&&(0,A.jsx)("div",{className:"mt-4 p-3 bg-primary/10 rounded-lg text-center",children:(0,A.jsxs)("p",{className:"text-sm font-medium",children:["We'll call you within ",Math.floor(n/60),":",(n%60).toString().padStart(2,"0")," minutes"]})}),(0,A.jsx)(bs,{className:"mt-4",children:(0,A.jsxs)("form",{onSubmit:s,className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(N.Label,{htmlFor:"call-name",children:"Your Name *"}),(0,A.jsx)(L.Input,{id:"call-name",value:j,onChange:a=>k(a.target.value),required:!0,placeholder:"Enter your name",className:"mt-2"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(N.Label,{htmlFor:"call-phone",children:"Phone Number *"}),(0,A.jsx)(L.Input,{id:"call-phone",type:"tel",value:h,onChange:a=>i(a.target.value),required:!0,placeholder:"+1 (555) 123-4567",className:"mt-2"})]}),(0,A.jsx)(K.Button,{type:"submit",variant:"outline",size:"lg",className:"w-full border-primary text-primary hover:bg-primary hover:text-white transition-colors",disabled:l||n>0,children:l?"Scheduling...":(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(I.PhoneCall,{size:18,className:"mr-2"}),"Call Me Now"]})}),(0,A.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"We'll call you within 2 minutes to discuss your needs"})]})})]})})]}),(0,A.jsxs)("div",{className:"space-y-8 animate-fade-in",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Get in touch"}),(0,A.jsx)("p",{className:"text-muted-foreground mb-8",children:"Ready to transform your customer experience? We're here to help. Schedule a free 30-minute consultation to discuss your needs."})]}),(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex items-start gap-4",children:[(0,A.jsx)("div",{className:"w-12 h-12 gradient-primary rounded-lg flex items-center justify-center flex-shrink-0",children:(0,A.jsx)(E,{className:"text-white",size:24})}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"font-semibold mb-1",children:"Email"}),(0,A.jsx)("p",{className:"text-muted-foreground",children:"info@brandingonthego.com"}),(0,A.jsx)("p",{className:"text-sm text-muted-foreground",children:"We reply within 24 hours"})]})]}),(0,A.jsxs)("div",{className:"flex items-start gap-4",children:[(0,A.jsx)("div",{className:"w-12 h-12 gradient-primary rounded-lg flex items-center justify-center flex-shrink-0",children:(0,A.jsx)(F.Phone,{className:"text-white",size:24})}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"font-semibold mb-1",children:"Phone"}),(0,A.jsx)("p",{className:"text-muted-foreground",children:"+1 (917) 523-1911"}),(0,A.jsx)("p",{className:"text-sm text-muted-foreground",children:"Mon-Fri, 9am-6pm EST"})]})]}),(0,A.jsxs)("div",{className:"flex items-start gap-4",children:[(0,A.jsx)("div",{className:"w-12 h-12 gradient-primary rounded-lg flex items-center justify-center flex-shrink-0",children:(0,A.jsx)(G,{className:"text-white",size:24})}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"font-semibold mb-1",children:"Office"}),(0,A.jsx)("p",{className:"text-muted-foreground",children:"123 AI Avenue, Suite 100"}),(0,A.jsx)("p",{className:"text-muted-foreground",children:"San Francisco, CA 94102"})]})]})]}),(0,A.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 mt-8",children:[(0,A.jsx)("h3",{className:"font-semibold mb-4",children:"What happens next?"}),(0,A.jsxs)("ol",{className:"space-y-3 text-sm text-muted-foreground",children:[(0,A.jsxs)("li",{className:"flex gap-3",children:[(0,A.jsx)("span",{className:"text-primary font-semibold",children:"1."}),(0,A.jsx)("span",{children:"We review your message and schedule a call within 24 hours"})]}),(0,A.jsxs)("li",{className:"flex gap-3",children:[(0,A.jsx)("span",{className:"text-primary font-semibold",children:"2."}),(0,A.jsx)("span",{children:"We discuss your needs and recommend the best solution"})]}),(0,A.jsxs)("li",{className:"flex gap-3",children:[(0,A.jsx)("span",{className:"text-primary font-semibold",children:"3."}),(0,A.jsx)("span",{children:"We create a custom proposal and implementation plan"})]}),(0,A.jsxs)("li",{className:"flex gap-3",children:[(0,A.jsx)("span",{className:"text-primary font-semibold",children:"4."}),(0,A.jsx)("span",{children:"You launch your AI agent in days, not months"})]})]})]})]})]})})})]})}],39451)}];

//# sourceMappingURL=_9b4ecd2a._.js.map