{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/bulwark/freelancing/branding-onthego-ai-showcase/src/app/api/create-session/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const workflowId = process.env.NEXT_PUBLIC_CHATKIT_WORKFLOW_ID;\n    const apiKey = process.env.OPENAI_API_KEY;\n\n    if (!apiKey) {\n      return NextResponse.json(\n        { error: 'OpenAI API key not configured' },\n        { status: 500 }\n      );\n    }\n\n    if (!workflowId) {\n      return NextResponse.json(\n        { error: 'ChatKit Workflow ID not configured' },\n        { status: 500 }\n      );\n    }\n\n    // Create a session with OpenAI\n    const response = await fetch(\n      `https://api.openai.com/v1/realtime/sessions`,\n      {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${apiKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o-realtime-preview-2024-12-17',\n          voice: 'alloy',\n        }),\n      }\n    );\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error('OpenAI API error:', errorData);\n      return NextResponse.json(\n        { error: 'Failed to create session with OpenAI' },\n        { status: response.status }\n      );\n    }\n\n    const data = await response.json();\n    \n    return NextResponse.json({\n      client_secret: data.client_secret.value,\n    });\n  } catch (error) {\n    console.error('Session creation error:', error);\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM;QACN,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;QAEzC,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAgC,GACzC;gBAAE,QAAQ;YAAI;QAElB;QAEA;;QAOA,+BAA+B;QAC/B,MAAM,WAAW,MAAM,MACrB,CAAC,2CAA2C,CAAC,EAC7C;YACE,QAAQ;YACR,SAAS;gBACP,iBAAiB,CAAC,OAAO,EAAE,QAAQ;gBACnC,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,OAAO;gBACP,OAAO;YACT;QACF;QAGF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,QAAQ,KAAK,CAAC,qBAAqB;YACnC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuC,GAChD;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,eAAe,KAAK,aAAa,CAAC,KAAK;QACzC;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}